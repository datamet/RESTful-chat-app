var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function s(){return Object.create(null)}function o(t){t.forEach(n)}function r(t){return"function"==typeof t}function a(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,...n){if(null==e)return t;const s=e.subscribe(...n);return s.unsubscribe?()=>s.unsubscribe():s}function c(t,e,n){t.$$.on_destroy.push(i(e,n))}function l(t,e,n,s){if(t){const o=u(t,e,n,s);return t[0](o)}}function u(t,e,n,s){return t[1]&&s?function(t,e){for(const n in e)t[n]=e[n];return t}(n.ctx.slice(),t[1](s(e))):n.ctx}function d(t,e,n,s,o,r,a){const i=function(t,e,n,s){if(t[2]&&s){const o=t[2](s(n));if(void 0===e.dirty)return o;if("object"==typeof o){const t=[],n=Math.max(e.dirty.length,o.length);for(let s=0;s<n;s+=1)t[s]=e.dirty[s]|o[s];return t}return e.dirty|o}return e.dirty}(e,s,o,r);if(i){const o=u(e,n,s,a);t.p(o,i)}}function h(t){return null==t?"":t}const m="undefined"!=typeof window;let f=m?()=>window.performance.now():()=>Date.now(),p=m?t=>requestAnimationFrame(t):t;const g=new Set;function $(t){g.forEach((e=>{e.c(t)||(g.delete(e),e.f())})),0!==g.size&&p($)}function y(t){let e;return 0===g.size&&p($),{promise:new Promise((n=>{g.add(e={c:t,f:n})})),abort(){g.delete(e)}}}function b(t,e){t.appendChild(e)}function v(t,e,n){t.insertBefore(e,n||null)}function w(t){t.parentNode.removeChild(t)}function x(t){return document.createElement(t)}function k(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function M(t){return document.createTextNode(t)}function I(){return M(" ")}function _(){return M("")}function S(t,e,n,s){return t.addEventListener(e,n,s),()=>t.removeEventListener(e,n,s)}function D(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function C(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function R(t,e,n){t.setAttributeNS("http://www.w3.org/1999/xlink",e,n)}function T(t,e){e=""+e,t.wholeText!==e&&(t.data=e)}function j(t,e){t.value=null==e?"":e}const E=new Set;let O,P=0;function U(t,e,n,s,o,r,a,i=0){const c=16.666/s;let l="{\n";for(let t=0;t<=1;t+=c){const s=e+(n-e)*r(t);l+=100*t+`%{${a(s,1-s)}}\n`}const u=l+`100% {${a(n,1-n)}}\n}`,d=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(u)}_${i}`,h=t.ownerDocument;E.add(h);const m=h.__svelte_stylesheet||(h.__svelte_stylesheet=h.head.appendChild(x("style")).sheet),f=h.__svelte_rules||(h.__svelte_rules={});f[d]||(f[d]=!0,m.insertRule(`@keyframes ${d} ${u}`,m.cssRules.length));const p=t.style.animation||"";return t.style.animation=`${p?`${p}, `:""}${d} ${s}ms linear ${o}ms 1 both`,P+=1,d}function q(t,e){const n=(t.style.animation||"").split(", "),s=n.filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")),o=n.length-s.length;o&&(t.style.animation=s.join(", "),P-=o,P||p((()=>{P||(E.forEach((t=>{const e=t.__svelte_stylesheet;let n=e.cssRules.length;for(;n--;)e.deleteRule(n);t.__svelte_rules={}})),E.clear())})))}function z(t){O=t}function L(){if(!O)throw new Error("Function called outside component initialization");return O}function N(t){L().$$.on_mount.push(t)}function A(t){L().$$.on_destroy.push(t)}function H(t,e){L().$$.context.set(t,e)}function B(t){return L().$$.context.get(t)}function F(t,e){const n=t.$$.callbacks[e.type];n&&n.slice().forEach((t=>t(e)))}const W=[],G=[],J=[],Y=[],K=Promise.resolve();let Q=!1;function V(t){J.push(t)}let X=!1;const Z=new Set;function tt(){if(!X){X=!0;do{for(let t=0;t<W.length;t+=1){const e=W[t];z(e),et(e.$$)}for(z(null),W.length=0;G.length;)G.pop()();for(let t=0;t<J.length;t+=1){const e=J[t];Z.has(e)||(Z.add(e),e())}J.length=0}while(W.length);for(;Y.length;)Y.pop()();Q=!1,X=!1,Z.clear()}}function et(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(V)}}let nt;function st(){return nt||(nt=Promise.resolve(),nt.then((()=>{nt=null}))),nt}function ot(t,e,n){t.dispatchEvent(function(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}(`${e?"intro":"outro"}${n}`))}const rt=new Set;let at;function it(){at={r:0,c:[],p:at}}function ct(){at.r||o(at.c),at=at.p}function lt(t,e){t&&t.i&&(rt.delete(t),t.i(e))}function ut(t,e,n,s){if(t&&t.o){if(rt.has(t))return;rt.add(t),at.c.push((()=>{rt.delete(t),s&&(n&&t.d(1),s())})),t.o(e)}}const dt={duration:0};function ht(t,e){ut(t,1,1,(()=>{e.delete(t.key)}))}function mt(t,e,n,s,o,r,a,i,c,l,u,d){let h=t.length,m=r.length,f=h;const p={};for(;f--;)p[t[f].key]=f;const g=[],$=new Map,y=new Map;for(f=m;f--;){const t=d(o,r,f),i=n(t);let c=a.get(i);c?s&&c.p(t,e):(c=l(i,t),c.c()),$.set(i,g[f]=c),i in p&&y.set(i,Math.abs(f-p[i]))}const b=new Set,v=new Set;function w(t){lt(t,1),t.m(i,u),a.set(t.key,t),u=t.first,m--}for(;h&&m;){const e=g[m-1],n=t[h-1],s=e.key,o=n.key;e===n?(u=e.first,h--,m--):$.has(o)?!a.has(s)||b.has(s)?w(e):v.has(o)?h--:y.get(s)>y.get(o)?(v.add(s),w(e)):(b.add(o),h--):(c(n,a),h--)}for(;h--;){const e=t[h];$.has(e.key)||c(e,a)}for(;m;)w(g[m-1]);return g}function ft(t){t&&t.c()}function pt(t,e,s,a){const{fragment:i,on_mount:c,on_destroy:l,after_update:u}=t.$$;i&&i.m(e,s),a||V((()=>{const e=c.map(n).filter(r);l?l.push(...e):o(e),t.$$.on_mount=[]})),u.forEach(V)}function gt(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function $t(t,e){-1===t.$$.dirty[0]&&(W.push(t),Q||(Q=!0,K.then(tt)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function yt(e,n,r,a,i,c,l=[-1]){const u=O;z(e);const d=e.$$={fragment:null,ctx:null,props:c,update:t,not_equal:i,bound:s(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:n.context||[]),callbacks:s(),dirty:l,skip_bound:!1};let h=!1;if(d.ctx=r?r(e,n.props||{},((t,n,...s)=>{const o=s.length?s[0]:n;return d.ctx&&i(d.ctx[t],d.ctx[t]=o)&&(!d.skip_bound&&d.bound[t]&&d.bound[t](o),h&&$t(e,t)),n})):[],d.update(),h=!0,o(d.before_update),d.fragment=!!a&&a(d.ctx),n.target){if(n.hydrate){const t=function(t){return Array.from(t.childNodes)}(n.target);d.fragment&&d.fragment.l(t),t.forEach(w)}else d.fragment&&d.fragment.c();n.intro&&lt(e.$$.fragment),pt(e,n.target,n.anchor,n.customElement),tt()}z(u)}class bt{$destroy(){gt(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(t){var e;this.$$set&&(e=t,0!==Object.keys(e).length)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}const vt=[];function wt(e,n=t){let s;const o=[];function r(t){if(a(e,t)&&(e=t,s)){const t=!vt.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),vt.push(n,e)}if(t){for(let t=0;t<vt.length;t+=2)vt[t][0](vt[t+1]);vt.length=0}}}return{set:r,update:function(t){r(t(e))},subscribe:function(a,i=t){const c=[a,i];return o.push(c),1===o.length&&(s=n(r)||t),a(e),()=>{const t=o.indexOf(c);-1!==t&&o.splice(t,1),0===o.length&&(s(),s=null)}}}}function xt(e,n,s){const a=!Array.isArray(e),c=a?[e]:e,l=n.length<2;return{subscribe:wt(s,(e=>{let s=!1;const u=[];let d=0,h=t;const m=()=>{if(d)return;h();const s=n(a?u[0]:u,e);l?e(s):h=r(s)?s:t},f=c.map(((t,e)=>i(t,(t=>{u[e]=t,d&=~(1<<e),s&&m()}),(()=>{d|=1<<e}))));return s=!0,m(),function(){o(f),h()}})).subscribe}}const kt=function(){const t=localStorage.getItem("auth")?localStorage.getItem("auth"):"",{subscribe:e,set:n,update:s}=wt(t);return{subscribe:e,set:t=>{n(t),localStorage.setItem("auth",t)}}}();const Mt=function(){const t=localStorage.getItem("user")?localStorage.getItem("user"):"",{subscribe:e,set:n,update:s}=wt(t);return{subscribe:e,set:t=>{n(t),localStorage.setItem("user",t)}}}(),It=wt(null),_t={},St={};function Dt(t){return{...t.location,state:t.history.state,key:t.history.state&&t.history.state.key||"initial"}}const Ct=function(t,e){const n=[];let s=Dt(t);return{get location(){return s},listen(e){n.push(e);const o=()=>{s=Dt(t),e({location:s,action:"POP"})};return t.addEventListener("popstate",o),()=>{t.removeEventListener("popstate",o);const s=n.indexOf(e);n.splice(s,1)}},navigate(e,{state:o,replace:r=!1}={}){o={...o,key:Date.now()+""};try{r?t.history.replaceState(o,null,e):t.history.pushState(o,null,e)}catch(n){t.location[r?"replace":"assign"](e)}s=Dt(t),n.forEach((t=>t({location:s,action:"PUSH"})))}}}(Boolean("undefined"!=typeof window&&window.document&&window.document.createElement)?window:function(t="/"){let e=0;const n=[{pathname:t,search:""}],s=[];return{get location(){return n[e]},addEventListener(t,e){},removeEventListener(t,e){},history:{get entries(){return n},get index(){return e},get state(){return s[e]},pushState(t,o,r){const[a,i=""]=r.split("?");e++,n.push({pathname:a,search:i}),s.push(t)},replaceState(t,o,r){const[a,i=""]=r.split("?");n[e]={pathname:a,search:i},s[e]=t}}}}()),Rt=/^:(.+)/;function Tt(t){return"*"===t[0]}function jt(t){return t.replace(/(^\/+|\/+$)/g,"").split("/")}function Et(t){return t.replace(/(^\/+|\/+$)/g,"")}function Ot(t,e){return{route:t,score:t.default?0:jt(t.path).reduce(((t,e)=>(t+=4,!function(t){return""===t}(e)?!function(t){return Rt.test(t)}(e)?Tt(e)?t-=5:t+=3:t+=2:t+=1,t)),0),index:e}}function Pt(t,e){let n,s;const[o]=e.split("?"),r=jt(o),a=""===r[0],i=function(t){return t.map(Ot).sort(((t,e)=>t.score<e.score?1:t.score>e.score?-1:t.index-e.index))}(t);for(let t=0,o=i.length;t<o;t++){const o=i[t].route;let c=!1;if(o.default){s={route:o,params:{},uri:e};continue}const l=jt(o.path),u={},d=Math.max(r.length,l.length);let h=0;for(;h<d;h++){const t=l[h],e=r[h];if(void 0!==t&&Tt(t)){u["*"===t?"*":t.slice(1)]=r.slice(h).map(decodeURIComponent).join("/");break}if(void 0===e){c=!0;break}let n=Rt.exec(t);if(n&&!a){const t=decodeURIComponent(e);u[n[1]]=t}else if(t!==e){c=!0;break}}if(!c){n={route:o,params:u,uri:"/"+r.slice(0,h).join("/")};break}}return n||s||null}function Ut(t,e){return`${Et("/"===e?t:`${Et(t)}/${Et(e)}`)}/`}function qt(t){let e;const n=t[9].default,s=l(n,t,t[8],null);return{c(){s&&s.c()},m(t,n){s&&s.m(t,n),e=!0},p(t,[e]){s&&s.p&&256&e&&d(s,n,t,t[8],e,null,null)},i(t){e||(lt(s,t),e=!0)},o(t){ut(s,t),e=!1},d(t){s&&s.d(t)}}}function zt(t,e,n){let s,o,r,{$$slots:a={},$$scope:i}=e,{basepath:l="/"}=e,{url:u=null}=e;const d=B(_t),h=B(St),m=wt([]);c(t,m,(t=>n(7,r=t)));const f=wt(null);let p=!1;const g=d||wt(u?{pathname:u}:Ct.location);c(t,g,(t=>n(6,o=t)));const $=h?h.routerBase:wt({path:l,uri:l});c(t,$,(t=>n(5,s=t)));const y=xt([$,f],(([t,e])=>{if(null===e)return t;const{path:n}=t,{route:s,uri:o}=e;return{path:s.default?n:s.path.replace(/\*.*$/,""),uri:o}}));return d||(N((()=>Ct.listen((t=>{g.set(t.location)})))),H(_t,g)),H(St,{activeRoute:f,base:$,routerBase:y,registerRoute:function(t){const{path:e}=s;let{path:n}=t;if(t._path=n,t.path=Ut(e,n),"undefined"==typeof window){if(p)return;const e=function(t,e){return Pt([t],e)}(t,o.pathname);e&&(f.set(e),p=!0)}else m.update((e=>(e.push(t),e)))},unregisterRoute:function(t){m.update((e=>{const n=e.indexOf(t);return e.splice(n,1),e}))}}),t.$$set=t=>{"basepath"in t&&n(3,l=t.basepath),"url"in t&&n(4,u=t.url),"$$scope"in t&&n(8,i=t.$$scope)},t.$$.update=()=>{if(32&t.$$.dirty){const{path:t}=s;m.update((e=>(e.forEach((e=>e.path=Ut(t,e._path))),e)))}if(192&t.$$.dirty){const t=Pt(r,o.pathname);f.set(t)}},[m,g,$,l,u,s,o,r,i,a]}class Lt extends bt{constructor(t){super(),yt(this,t,zt,qt,a,{basepath:3,url:4})}}var Nt=()=>{const t=[],e=(t=>e=>{const n={path:e.path||"/",method:e.method||"GET",headers:e.headers||{},body:e.body||{}},s=[...t];return new Promise(((t,e)=>{const o={status:200,body:{},err:t=>{e(t)},end:()=>{t({status:o.status,body:o.body})}},r=t=>{if(!t){const t=s.shift();t&&t(n,o,r)}};r()}))})(t);return{use:e=>t.push(e),post:(t,n)=>e({path:t,method:"POST",...n}),get:(t,n)=>e({path:t,method:"GET",...n}),put:(t,n)=>e({path:t,method:"PUT",...n}),delete:(t,n)=>e({path:t,method:"DELETE",...n})}};let At;At="object"==typeof process?"node":"browser";const Ht={env:At,push:"node"===At&&process.env.PUSH||!0,host:"node"===At&&process.env.HOST||"localhost",port:"node"===At&&process.env.PORT||5e3,wsport:"node"===At&&process.env.WS_PORT||5050};class Bt{state;subscribers;constructor(){this.state={},this.subscribers=[]}get(){return{...this.state}}update(t){this.state={...this.state,...t};for(const t of this.subscribers)t({...this.state})}subscribe(t){return this.subscribers.push(t),()=>this.subscribers.splice(this.subscribers.indexOf(t),1)}}const Ft=async(t,e,n)=>{try{e(await t())}catch(t){console.log("Error while fetching. Stopping"),console.log(t),errCallback&&errCallback(),n()}};class Wt{subs;started;constructor(){this.subs=new Map,this.started=!1,this.createStopper=t=>()=>{this.subs.delete(t),clearInterval(t)},this.add=(t,e,n,s)=>{const o=setInterval((()=>{this.started&&Ft(e,n,this.createStopper(o))}),t);return this.subs.set(o,{interval:t,func:e,callback:n,errCallback:s}),this.createStopper(o)},this.update=()=>{for(const[t,{func:e,callback:n,errCallback:s}]of this.subs)Ft(e,n,this.createStopper(t))}}}var Gt="browser"===Ht.env?(t,{update:e,state:n})=>{let s,o=e;n.subscribe((({token:e})=>{e&&!s?(s=(t=>{const e=new WebSocket(t);return e.onerror=t=>{console.log(t),e.close()},e})(t),s.onopen=()=>s.send(e),s.onmessage=t=>{o()}):!e&&s&&(s.close(),s=null)}))}:(t,{SocketModule:e,update:n,state:s})=>{let o,r=n;s.subscribe((({token:n})=>{n&&!o?(o=((t,e)=>{const n=new e(t);return n.on("error",(t=>{console.log(t),n.close()})),n})(t,e),o.on("open",(()=>o.send(n))),o.on("message",(t=>{r()}))):!n&&o&&(o.close(),o=null)}))},Jt=(t,e,n)=>{"POST"!==t.method&&"PUT"!==t.method||(t.headers["Content-Type"]="application/json"),n()};let Yt,Kt;const Qt=async(t,e,n)=>{try{const{path:s,method:o,headers:r,body:a}=t,i=await fetch(`http://${Yt.host}:${Yt.port}${s}`,{method:o,headers:r,body:"POST"===o||"PUT"==o?JSON.stringify(a):null});if("application/json; charset=utf-8"===i.headers.get("Content-Type")){const t=await i.json();e.status=i.status,e.body=t}else console.log(await i.text());n()}catch(t){e.status=408,e.body={error:"Could not connect to the server"},n()}},Vt=async(t,e,n)=>{try{const{path:s,method:o,headers:r,body:a}=t,i=JSON.stringify(a),c={hostname:Yt.host,port:Yt.port,path:s,method:o,headers:{...r,"Content-Length":i.length}},l=Kt.request(c,(t=>{e.status=t.statusCode;let s="";t.on("data",(t=>{s+=t})),t.on("end",(()=>{const t=JSON.parse(s);e.body=t,n()}))}));l.on("error",(t=>{console.error(t)})),l.write(i),l.end()}catch(t){e.status=408,e.body={error:"Could not connect to the server"},n()}};var Xt="browser"===Ht.env?t=>(Yt=t,Qt):(t,e)=>(Kt=e,Yt=t,Vt);var Zt=(t,e,n)=>{if(!e&&"node"===Ht.env)throw new Error("Http module is required as input when running in node");"object"==typeof t&&Object.assign(Ht,t);const s=Nt(),o=new Bt;s.use((t=>(e,n,s)=>{if(("/api/users"===e.path||"/api/tokens"===e.path)&&"POST"===e.method)return void s();const{token:o}=t.get();o&&"string"==typeof o&&(e.headers.Token=o),s()})(o)),s.use(Jt),s.use(Xt(Ht,e)),s.use((t=>(e,n,s)=>{n.body.token&&"string"==typeof n.body.token&&t.update({token:n.body.token}),n.body.message&&"Logged out"===n.body.message&&t.update({token:null,userID:null}),n.body.message&&"User deleted"===n.body.message&&t.update({token:null,userID:null}),n.body.error&&"Session not found"===n.body.error&&t.update({token:null,userID:null}),n.body.userID&&"string"==typeof n.body.userID&&t.update({userID:n.body.userID}),n.end()})(o));const r=(a=s,{register:(t,e)=>a.post("/api/users",{body:{username:t,password:e}}),registerBot:(t,e)=>a.post("/api/users",{body:{username:t,password:e,bot:!0}}),getUsers:()=>a.get("/api/users"),getUser:t=>a.get(`/api/user/${t}`),deleteUser:t=>a.delete(`/api/user/${t}`),login:(t,e)=>a.post("/api/tokens",{body:{username:t,password:e}}),getTokens:()=>a.get("/api/tokens"),extendToken:t=>a.post(`/api/token/${t}`),logout:t=>a.delete(`/api/token/${t}`),createRoom:t=>a.post("/api/rooms",{body:{name:t}}),getRooms:()=>a.get("/api/rooms"),getRoom:t=>a.get(`/api/room/${t}`),deleteRoom:t=>a.delete(`/api/room/${t}`),joinRoom:(t,e)=>a.post(`/api/room/${t}/users`,{body:{user:e}}),getUsersInRoom:t=>a.get(`/api/room/${t}/users`),getMessages:t=>a.get(`/api/room/${t}/messages`),postMessage:(t,e,n)=>a.post(`/api/room/${t}/${e}/messages`,{body:{message:n}}),getMessagesFromUser:(t,e)=>a.get(`/room/${t}/${e}/messages`),checkPush:()=>a.get("/api/push")});var a;return r.state=o,r.fresh=new Wt,Gt(`ws://${Ht.host}:${Ht.wsport}`,{SocketModule:n,update:r.fresh.update,state:o}),(async t=>{"disabled"!==(await t.checkPush()).body.push&&Ht.push||t.fresh.start()})(r),r};function te(e){let n,s,o,r,a;return{c(){n=k("svg"),s=k("use"),o=I(),r=k("symbol"),a=k("path"),R(s,"xlink:href","#icon-bubbles"),C(n,"class","icon icon-bubbles svelte-1m14we6"),C(a,"d","M34 28.161c0 1.422 0.813 2.653 2 3.256v0.498c-0.332 0.045-0.671 0.070-1.016 0.070-2.125 0-4.042-0.892-5.398-2.321-0.819 0.218-1.688 0.336-2.587 0.336-4.971 0-9-3.582-9-8s4.029-8 9-8c4.971 0 9 3.582 9 8 0 1.73-0.618 3.331-1.667 4.64-0.213 0.463-0.333 0.979-0.333 1.522zM16 0c8.702 0 15.781 5.644 15.995 12.672-1.537-0.685-3.237-1.047-4.995-1.047-2.986 0-5.807 1.045-7.942 2.943-2.214 1.968-3.433 4.607-3.433 7.432 0 1.396 0.298 2.747 0.867 3.993-0.163 0.004-0.327 0.007-0.492 0.007-0.849 0-1.682-0.054-2.495-0.158-3.437 3.437-7.539 4.053-11.505 4.144v-0.841c2.142-1.049 4-2.961 4-5.145 0-0.305-0.024-0.604-0.068-0.897-3.619-2.383-5.932-6.024-5.932-10.103 0-7.18 7.163-13 16-13z"),C(r,"id","icon-bubbles"),C(r,"viewBox","0 0 36 32")},m(t,e){v(t,n,e),b(n,s),v(t,o,e),v(t,r,e),b(r,a)},p:t,i:t,o:t,d(t){t&&w(n),t&&w(o),t&&w(r)}}}class ee extends bt{constructor(t){super(),yt(this,t,null,te,a,{})}}function ne(t,{delay:n=0,duration:s=400,easing:o=e}={}){const r=+getComputedStyle(t).opacity;return{delay:n,duration:s,easing:o,css:t=>"opacity: "+t*r}}function se(e){let n,s,o,r,a;return{c(){n=k("svg"),s=k("use"),o=I(),r=k("symbol"),a=k("path"),R(s,"xlink:href","#icon-cross"),C(n,"class","icon icon-cross svelte-1qil70w"),C(a,"d","M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"),C(r,"id","icon-cross"),C(r,"viewBox","0 0 20 20")},m(t,e){v(t,n,e),b(n,s),v(t,o,e),v(t,r,e),b(r,a)},p:t,i:t,o:t,d(t){t&&w(n),t&&w(o),t&&w(r)}}}class oe extends bt{constructor(t){super(),yt(this,t,null,se,a,{})}}function re(t){let e,n,s,o,a;const i=t[3].default,c=l(i,t,t[2],null);return{c(){e=x("button"),c&&c.c(),C(e,"class",n=h(t[1])+" svelte-1llkmww")},m(n,i){v(n,e,i),c&&c.m(e,null),s=!0,o||(a=S(e,"click",(function(){r(t[0])&&t[0].apply(this,arguments)})),o=!0)},p(o,[r]){t=o,c&&c.p&&4&r&&d(c,i,t,t[2],r,null,null),(!s||2&r&&n!==(n=h(t[1])+" svelte-1llkmww"))&&C(e,"class",n)},i(t){s||(lt(c,t),s=!0)},o(t){ut(c,t),s=!1},d(t){t&&w(e),c&&c.d(t),o=!1,a()}}}function ae(t,e,n){let{$$slots:s={},$$scope:o}=e,{action:r=(()=>{})}=e,{color:a="blue"}=e;return t.$$set=t=>{"action"in t&&n(0,r=t.action),"color"in t&&n(1,a=t.color),"$$scope"in t&&n(2,o=t.$$scope)},[r,a,o,s]}class ie extends bt{constructor(t){super(),yt(this,t,ae,re,a,{action:0,color:1})}}function ce(t){let e;return{c(){e=M(t[0])},m(t,n){v(t,e,n)},p(t,n){1&n&&T(e,t[0])},d(t){t&&w(e)}}}function le(n){let s,a,i,c,l,u,d,h,m,p,g,$,k,_,R,E,O,P,z,L,N,A,H,B,F,W,G,J,Y;return c=new oe({}),B=new ie({props:{action:n[5],$$slots:{default:[ue]},$$scope:{ctx:n}}}),{c(){s=x("div"),a=x("div"),i=x("button"),ft(c.$$.fragment),l=I(),u=x("h3"),d=M(n[0]),h=I(),m=x("form"),p=x("div"),g=x("label"),g.textContent="Username:",$=I(),k=x("input"),_=I(),R=x("div"),E=x("label"),E.textContent="Password:",O=I(),P=x("input"),z=I(),L=x("div"),N=x("p"),A=M(n[2]),H=I(),ft(B.$$.fragment),C(i,"class","cross svelte-bjlt99"),C(g,"for","username"),C(k,"id","username"),C(k,"type","text"),C(p,"class","form-group"),C(E,"for","password"),C(P,"id","password"),C(P,"type","password"),C(R,"class","form-group"),C(L,"class","error svelte-bjlt99"),C(m,"class","form svelte-bjlt99"),C(a,"class","modal svelte-bjlt99"),C(s,"class","background svelte-bjlt99")},m(t,e){var o;v(t,s,e),b(s,a),b(a,i),pt(c,i,null),b(a,l),b(a,u),b(u,d),b(a,h),b(a,m),b(m,p),b(p,g),b(p,$),b(p,k),j(k,n[3]),b(m,_),b(m,R),b(R,E),b(R,O),b(R,P),j(P,n[4]),b(m,z),b(m,L),b(L,N),b(N,A),b(m,H),pt(B,m,null),G=!0,J||(Y=[S(i,"click",n[9]),S(k,"input",n[10]),S(P,"input",n[11]),S(m,"submit",(o=n[7],function(t){return t.preventDefault(),o.call(this,t)})),S(a,"click",D(n[6])),S(s,"click",n[12])],J=!0)},p(t,e){(!G||1&e)&&T(d,t[0]),8&e&&k.value!==t[3]&&j(k,t[3]),16&e&&P.value!==t[4]&&j(P,t[4]),(!G||4&e)&&T(A,t[2]);const n={};65537&e&&(n.$$scope={dirty:e,ctx:t}),B.$set(n)},i(n){G||(lt(c.$$.fragment,n),lt(B.$$.fragment,n),V((()=>{W&&W.end(1),F||(F=function(n,s,o){let a,i,c=s(n,o),l=!1,u=0;function d(){a&&q(n,a)}function h(){const{delay:s=0,duration:o=300,easing:r=e,tick:h=t,css:m}=c||dt;m&&(a=U(n,0,1,o,s,r,m,u++)),h(0,1);const p=f()+s,g=p+o;i&&i.abort(),l=!0,V((()=>ot(n,!0,"start"))),i=y((t=>{if(l){if(t>=g)return h(1,0),ot(n,!0,"end"),d(),l=!1;if(t>=p){const e=r((t-p)/o);h(e,1-e)}}return l}))}let m=!1;return{start(){m||(q(n),r(c)?(c=c(),st().then(h)):h())},invalidate(){m=!1},end(){l&&(d(),l=!1)}}}(s,ne,{duration:200})),F.start()})),G=!0)},o(n){ut(c.$$.fragment,n),ut(B.$$.fragment,n),F&&F.invalidate(),W=function(n,s,a){let i,c=s(n,a),l=!0;const u=at;function d(){const{delay:s=0,duration:r=300,easing:a=e,tick:d=t,css:h}=c||dt;h&&(i=U(n,1,0,r,s,a,h));const m=f()+s,p=m+r;V((()=>ot(n,!1,"start"))),y((t=>{if(l){if(t>=p)return d(0,1),ot(n,!1,"end"),--u.r||o(u.c),!1;if(t>=m){const e=a((t-m)/r);d(1-e,e)}}return l}))}return u.r+=1,r(c)?st().then((()=>{c=c(),d()})):d(),{end(t){t&&c.tick&&c.tick(1,0),l&&(i&&q(n,i),l=!1)}}}(s,ne,{duration:200}),G=!1},d(t){t&&w(s),gt(c),gt(B),t&&W&&W.end(),J=!1,o(Y)}}}function ue(t){let e;return{c(){e=M(t[0])},m(t,n){v(t,e,n)},p(t,n){1&n&&T(e,t[0])},d(t){t&&w(e)}}}function de(t){let e,n,s,o;n=new ie({props:{action:t[8],$$slots:{default:[ce]},$$scope:{ctx:t}}});let r=t[1]&&le(t);return{c(){e=x("div"),ft(n.$$.fragment),s=I(),r&&r.c(),C(e,"class","dropdown svelte-bjlt99")},m(t,a){v(t,e,a),pt(n,e,null),b(e,s),r&&r.m(e,null),o=!0},p(t,[s]){const o={};2&s&&(o.action=t[8]),65537&s&&(o.$$scope={dirty:s,ctx:t}),n.$set(o),t[1]?r?(r.p(t,s),2&s&&lt(r,1)):(r=le(t),r.c(),lt(r,1),r.m(e,null)):r&&(it(),ut(r,1,1,(()=>{r=null})),ct())},i(t){o||(lt(n.$$.fragment,t),lt(r),o=!0)},o(t){ut(n.$$.fragment,t),ut(r),o=!1},d(t){t&&w(e),gt(n),r&&r.d()}}}function he(t,e,n){let s,o,{action:r="Register"}=e,a=!1,i="",c=B("client");const l=async()=>await c.login(s,o),u=async()=>{const t=await c.register(s,o);return t.body.message&&l(),t};return t.$$set=t=>{"action"in t&&n(0,r=t.action)},[r,a,i,s,o,async()=>{const t="Register"===r?u:l;let e=await t();e.body.error&&n(2,i=e.body.error),e.body.message&&(n(1,a=!1),n(2,i=""),n(3,s=""),n(4,o=""))},function(e){F(t,e)},function(e){F(t,e)},()=>n(1,a=!0),()=>n(1,a=!1),function(){s=this.value,n(3,s)},function(){o=this.value,n(4,o)},()=>n(1,a=!1)]}class me extends bt{constructor(t){super(),yt(this,t,he,de,a,{action:0})}}function fe(e){let n,s,o;return{c(){n=x("p"),s=M("You are logged in as "),o=M(e[0]),C(n,"class","svelte-12r322e")},m(t,e){v(t,n,e),b(n,s),b(n,o)},p(t,[e]){1&e&&T(o,t[0])},i:t,o:t,d(t){t&&w(n)}}}function pe(t,e,n){let s;c(t,Mt,(t=>n(1,s=t)));const o=B("client");let r="";return(async()=>{const t=await o.getUser(s);t.body.user&&n(0,r=t.body.user.username)})(),[r]}class ge extends bt{constructor(t){super(),yt(this,t,pe,fe,a,{})}}function $e(t){let e,n,s,o,r,a;return n=new ge({}),r=new ie({props:{action:t[2],$$slots:{default:[be]},$$scope:{ctx:t}}}),{c(){e=x("li"),ft(n.$$.fragment),s=I(),o=x("li"),ft(r.$$.fragment)},m(t,i){v(t,e,i),pt(n,e,null),v(t,s,i),v(t,o,i),pt(r,o,null),a=!0},p(t,e){const n={};16&e&&(n.$$scope={dirty:e,ctx:t}),r.$set(n)},i(t){a||(lt(n.$$.fragment,t),lt(r.$$.fragment,t),a=!0)},o(t){ut(n.$$.fragment,t),ut(r.$$.fragment,t),a=!1},d(t){t&&w(e),gt(n),t&&w(s),t&&w(o),gt(r)}}}function ye(e){let n,s,o,r,a,i;return s=new me({props:{action:"Login"}}),a=new me({props:{action:"Register"}}),{c(){n=x("li"),ft(s.$$.fragment),o=I(),r=x("li"),ft(a.$$.fragment)},m(t,e){v(t,n,e),pt(s,n,null),v(t,o,e),v(t,r,e),pt(a,r,null),i=!0},p:t,i(t){i||(lt(s.$$.fragment,t),lt(a.$$.fragment,t),i=!0)},o(t){ut(s.$$.fragment,t),ut(a.$$.fragment,t),i=!1},d(t){t&&w(n),gt(s),t&&w(o),t&&w(r),gt(a)}}}function be(t){let e;return{c(){e=M("Logout")},m(t,n){v(t,e,n)},d(t){t&&w(e)}}}function ve(t){let e,n,s,o,r,a,i,c,l,u,d,h,m,f,p,g=(t[1]?t[1].name:"")+"";s=new ee({});const $=[ye,$e],y=[];function k(t,e){return t[0]?1:0}return m=k(t),f=y[m]=$[m](t),{c(){e=x("header"),n=x("div"),ft(s.$$.fragment),o=I(),r=x("h1"),r.textContent="ChatApp",a=I(),i=x("div"),c=x("h2"),l=M(g),u=I(),d=x("nav"),h=x("ul"),f.c(),C(r,"class","svelte-g75w2"),C(n,"class","logo svelte-g75w2"),C(c,"class","svelte-g75w2"),C(i,"class","room-title"),C(h,"class","svelte-g75w2"),C(e,"class","svelte-g75w2")},m(t,f){v(t,e,f),b(e,n),pt(s,n,null),b(n,o),b(n,r),b(e,a),b(e,i),b(i,c),b(c,l),b(e,u),b(e,d),b(d,h),y[m].m(h,null),p=!0},p(t,[e]){(!p||2&e)&&g!==(g=(t[1]?t[1].name:"")+"")&&T(l,g);let n=m;m=k(t),m===n?y[m].p(t,e):(it(),ut(y[n],1,1,(()=>{y[n]=null})),ct(),f=y[m],f?f.p(t,e):(f=y[m]=$[m](t),f.c()),lt(f,1),f.m(h,null))},i(t){p||(lt(s.$$.fragment,t),lt(f),p=!0)},o(t){ut(s.$$.fragment,t),ut(f),p=!1},d(t){t&&w(e),gt(s),y[m].d()}}}function we(t,e,n){let s,o;c(t,kt,(t=>n(0,s=t))),c(t,It,(t=>n(1,o=t)));const r=B("client");return[s,o,async()=>{await r.logout(s)}]}class xe extends bt{constructor(t){super(),yt(this,t,we,ve,a,{})}}function ke(e){let n,s,o,r,a;return{c(){n=k("svg"),s=k("use"),o=I(),r=k("symbol"),a=k("path"),R(s,"xlink:href","#icon-home"),C(n,"class","icon icon-home svelte-8idrmo"),C(a,"d","M18.672 11h-1.672v6c0 0.445-0.194 1-1 1h-4v-6h-4v6h-4c-0.806 0-1-0.555-1-1v-6h-1.672c-0.598 0-0.47-0.324-0.060-0.748l8.024-8.032c0.195-0.202 0.451-0.302 0.708-0.312 0.257 0.010 0.513 0.109 0.708 0.312l8.023 8.031c0.411 0.425 0.539 0.749-0.059 0.749z"),C(r,"id","icon-home"),C(r,"viewBox","0 0 20 20")},m(t,e){v(t,n,e),b(n,s),v(t,o,e),v(t,r,e),b(r,a)},p:t,i:t,o:t,d(t){t&&w(n),t&&w(o),t&&w(r)}}}class Me extends bt{constructor(t){super(),yt(this,t,null,ke,a,{})}}function Ie(t,e,n){const s=t.slice();return s[16]=e[n],s}function _e(t,e,n){const s=t.slice();return s[16]=e[n],s}function Se(e){let n;return{c(){n=x("p"),n.textContent="You haven't joined any rooms",C(n,"class","placeholder svelte-13qkdxs")},m(t,e){v(t,n,e)},p:t,i:t,o:t,d(t){t&&w(n)}}}function De(t){let e,n,s=[],o=new Map,r=t[0];const a=t=>t[16].id;for(let e=0;e<r.length;e+=1){let n=_e(t,r,e),i=a(n);o.set(i,s[e]=Ce(i,n))}return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=_()},m(t,o){for(let e=0;e<s.length;e+=1)s[e].m(t,o);v(t,e,o),n=!0},p(t,n){261&n&&(r=t[0],it(),s=mt(s,n,a,1,t,r,o,e.parentNode,ht,Ce,e,_e),ct())},i(t){if(!n){for(let t=0;t<r.length;t+=1)lt(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)ut(s[t]);n=!1},d(t){for(let e=0;e<s.length;e+=1)s[e].d(t);t&&w(e)}}}function Ce(t,e){let n,s,o,r,a,i,c,l,u,d,h,m,f=e[16].name+"";function p(){return e[9](e[16])}return r=new Me({}),{key:t,first:null,c(){n=x("button"),s=x("div"),o=x("div"),ft(r.$$.fragment),a=I(),i=x("h3"),c=M(f),u=I(),C(i,"class","room-name svelte-13qkdxs"),C(o,"class","room-title svelte-13qkdxs"),C(s,"class",l="room "+(e[16].id===e[2]?"selected":"")+" svelte-13qkdxs"),C(n,"class","room-button svelte-13qkdxs"),this.first=n},m(t,e){v(t,n,e),b(n,s),b(s,o),pt(r,o,null),b(o,a),b(o,i),b(i,c),b(n,u),d=!0,h||(m=S(n,"click",p),h=!0)},p(t,n){e=t,(!d||1&n)&&f!==(f=e[16].name+"")&&T(c,f),(!d||5&n&&l!==(l="room "+(e[16].id===e[2]?"selected":"")+" svelte-13qkdxs"))&&C(s,"class",l)},i(t){d||(lt(r.$$.fragment,t),d=!0)},o(t){ut(r.$$.fragment,t),d=!1},d(t){t&&w(n),gt(r),h=!1,m()}}}function Re(e){let n;return{c(){n=x("p"),n.textContent="There are no rooms you haven't joined",C(n,"class","placeholder svelte-13qkdxs")},m(t,e){v(t,n,e)},p:t,i:t,o:t,d(t){t&&w(n)}}}function Te(t){let e,n,s=[],o=new Map,r=t[1];const a=t=>t[16].id;for(let e=0;e<r.length;e+=1){let n=Ie(t,r,e),i=a(n);o.set(i,s[e]=je(i,n))}return{c(){for(let t=0;t<s.length;t+=1)s[t].c();e=_()},m(t,o){for(let e=0;e<s.length;e+=1)s[e].m(t,o);v(t,e,o),n=!0},p(t,n){98&n&&(r=t[1],it(),s=mt(s,n,a,1,t,r,o,e.parentNode,ht,je,e,Ie),ct())},i(t){if(!n){for(let t=0;t<r.length;t+=1)lt(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)ut(s[t]);n=!1},d(t){for(let e=0;e<s.length;e+=1)s[e].d(t);t&&w(e)}}}function je(t,e){let n,s,o,r,a,i,c,l,u,d,h,m,f=e[16].name+"";function p(){return e[10](e[16])}return o=new Me({}),{key:t,first:null,c(){n=x("div"),s=x("div"),ft(o.$$.fragment),r=I(),a=x("h3"),i=M(f),c=I(),l=x("button"),l.textContent="Join",u=I(),C(a,"class","room-name svelte-13qkdxs"),C(s,"class","room-title svelte-13qkdxs"),C(l,"class","room-action svelte-13qkdxs"),C(n,"class","room svelte-13qkdxs"),this.first=n},m(t,e){v(t,n,e),b(n,s),pt(o,s,null),b(s,r),b(s,a),b(a,i),b(n,c),b(n,l),b(n,u),d=!0,h||(m=S(l,"click",p),h=!0)},p(t,n){e=t,(!d||2&n)&&f!==(f=e[16].name+"")&&T(i,f)},i(t){d||(lt(o.$$.fragment,t),d=!0)},o(t){ut(o.$$.fragment,t),d=!1},d(t){t&&w(n),gt(o),h=!1,m()}}}function Ee(t){let e;return{c(){e=M("Create Room +")},m(t,n){v(t,e,n)},d(t){t&&w(e)}}}function Oe(t){let e,n,s,o,r,a,i,c,l,u,d,h,m,f,p,g,$,y,k,_,D,R,E,O,P;const U=[De,Se],q=[];function z(t,e){return t[0].length>0?0:1}o=z(t),r=q[o]=U[o](t);const L=[Te,Re],N=[];function A(t,e){return t[1].length>0?0:1}return u=A(t),d=N[u]=L[u](t),R=new ie({props:{action:t[7],$$slots:{default:[Ee]},$$scope:{ctx:t}}}),{c(){e=x("div"),n=x("p"),n.textContent="Joined rooms:",s=I(),r.c(),a=I(),i=x("div"),c=x("p"),c.textContent="Other rooms:",l=I(),d.c(),h=I(),m=x("div"),f=x("div"),p=x("label"),p.textContent="New room name:",g=I(),$=x("input"),y=I(),k=x("p"),_=M(t[4]),D=I(),ft(R.$$.fragment),C(n,"class","title"),C(e,"class","joined-rooms"),C(c,"class","title"),C(i,"class","otherRooms"),C(p,"for","room-name"),C($,"type","text"),C($,"id","room-name"),C(k,"class","error svelte-13qkdxs"),C(m,"class","new-room svelte-13qkdxs")},m(r,d){v(r,e,d),b(e,n),b(e,s),q[o].m(e,null),v(r,a,d),v(r,i,d),b(i,c),b(i,l),N[u].m(i,null),v(r,h,d),v(r,m,d),b(m,f),b(f,p),b(f,g),b(f,$),j($,t[3]),b(f,y),b(f,k),b(k,_),b(m,D),pt(R,m,null),E=!0,O||(P=S($,"input",t[11]),O=!0)},p(t,[n]){let s=o;o=z(t),o===s?q[o].p(t,n):(it(),ut(q[s],1,1,(()=>{q[s]=null})),ct(),r=q[o],r?r.p(t,n):(r=q[o]=U[o](t),r.c()),lt(r,1),r.m(e,null));let a=u;u=A(t),u===a?N[u].p(t,n):(it(),ut(N[a],1,1,(()=>{N[a]=null})),ct(),d=N[u],d?d.p(t,n):(d=N[u]=L[u](t),d.c()),lt(d,1),d.m(i,null)),8&n&&$.value!==t[3]&&j($,t[3]),(!E||16&n)&&T(_,t[4]);const c={};2097152&n&&(c.$$scope={dirty:n,ctx:t}),R.$set(c)},i(t){E||(lt(r),lt(d),lt(R.$$.fragment,t),E=!0)},o(t){ut(r),ut(d),ut(R.$$.fragment,t),E=!1},d(t){t&&w(e),q[o].d(),t&&w(a),t&&w(i),N[u].d(),t&&w(h),t&&w(m),gt(R),O=!1,P()}}}function Pe(t,e,n){let s;c(t,Mt,(t=>n(5,s=t)));const o=B("client");let r,a=[],i=[],l="",u="";const d=async(t,e)=>{(await o.joinRoom(t,e)).body.message&&f()},h=async t=>{n(2,l=t);const e=await o.getRoom(t);e.body.room?It.set(e.body.room):It.set(null)},m=t=>{if(t.body.rooms){const e=[],s=[];for(const n of t.body.rooms)n.joined?e.push(n):s.push(n),console.log(n.id,l);n(0,a=e),n(1,i=s)}},f=async()=>{const t=await o.getRooms();m(t)};let p;N((()=>{p=o.fresh.add(3e3,(()=>o.getRooms()),m)})),A((()=>{p()})),It.subscribe((()=>f()));return[a,i,l,r,u,s,d,async()=>{const t=await o.createRoom(r);t.body.message?(n(4,u=""),n(3,r="")):n(4,u=t.body.error)},h,t=>h(t.id),t=>d(t.id,s),function(){r=this.value,n(3,r)}]}class Ue extends bt{constructor(t){super(),yt(this,t,Pe,Oe,a,{})}}function qe(e){let n;return{c(){n=x("div"),n.innerHTML="<p>Log in to view rooms...</p>",C(n,"class","login-message svelte-16rt11w")},m(t,e){v(t,n,e)},i:t,o:t,d(t){t&&w(n)}}}function ze(t){let e,n;return e=new Ue({}),{c(){ft(e.$$.fragment)},m(t,s){pt(e,t,s),n=!0},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){gt(e,t)}}}function Le(t){let e,n,s,o;const r=[ze,qe],a=[];function i(t,e){return t[0]?0:1}return n=i(t),s=a[n]=r[n](t),{c(){e=x("aside"),s.c(),C(e,"class","svelte-16rt11w")},m(t,s){v(t,e,s),a[n].m(e,null),o=!0},p(t,[o]){let c=n;n=i(t),n!==c&&(it(),ut(a[c],1,1,(()=>{a[c]=null})),ct(),s=a[n],s||(s=a[n]=r[n](t),s.c()),lt(s,1),s.m(e,null))},i(t){o||(lt(s),o=!0)},o(t){ut(s),o=!1},d(t){t&&w(e),a[n].d()}}}function Ne(t,e,n){let s;return c(t,kt,(t=>n(0,s=t))),[s]}class Ae extends bt{constructor(t){super(),yt(this,t,Ne,Le,a,{})}}function He(e){let n,s,o,r,a;return{c(){n=k("svg"),s=k("use"),o=I(),r=k("symbol"),a=k("path"),R(s,"xlink:href","#icon-paper-plane"),C(n,"class","icon icon-paper-plane svelte-1dywkow"),C(a,"d","M27.563 0.172c0.328 0.234 0.484 0.609 0.422 1l-4 24c-0.047 0.297-0.234 0.547-0.5 0.703-0.141 0.078-0.313 0.125-0.484 0.125-0.125 0-0.25-0.031-0.375-0.078l-7.078-2.891-3.781 4.609c-0.187 0.234-0.469 0.359-0.766 0.359-0.109 0-0.234-0.016-0.344-0.063-0.391-0.141-0.656-0.516-0.656-0.938v-5.453l13.5-16.547-16.703 14.453-6.172-2.531c-0.359-0.141-0.594-0.469-0.625-0.859-0.016-0.375 0.172-0.734 0.5-0.922l26-15c0.156-0.094 0.328-0.141 0.5-0.141 0.203 0 0.406 0.063 0.562 0.172z"),C(r,"id","icon-paper-plane"),C(r,"viewBox","0 0 28 28")},m(t,e){v(t,n,e),b(n,s),v(t,o,e),v(t,r,e),b(r,a)},p:t,i:t,o:t,d(t){t&&w(n),t&&w(o),t&&w(r)}}}class Be extends bt{constructor(t){super(),yt(this,t,null,He,a,{})}}const Fe=["Olav","Iselin","Magnus","Mari","Oliver","Tobias"],We=["Olav1234","Iselin1234","Magnus1234","Mari1234","Oliver1234","Tobias1234"];var Ge=()=>{const t=Math.floor(Math.random()*Fe.length);return{username:Fe[t],password:We[t]}};const Je=[["anyone here?","who is here?","how are you doing","i am here!","am I alone here?"],["i have to leave!","i will be back soon","have a nice day, bye!","i have to go"],["I'm listening...","Go on...","Continue","Haha","Same","Try again","I dont understand","Omg!","Bro..."],["hello","hi","hey"],["who are you","your name"],["how are you","how are things"],["what is going on","what is up"],["happy","good","well","fantastic","cool"],["bad","bored","tired","sad"],["story","joke"],["thanks","thank you"],["bye","good bye","goodbye"]],Ye=[["Yes, I am here!","For now","I am here, and I am good thanks"],["Ok","See you soon","Text you later","Have a nice day"],["What makes you happy?","Tell a joke"],["Hello!","How are you","Good to see you","Hello there!"],["My name is [username]","I am a bot with username [username]"],["Fine... how are you?","Pretty well, how are you?","Fantastic, how are you?"],["Nothing much","Exciting things!"],["Glad to hear!"],["Why?","Cheer up buddy"],["What about?","Once upon a time...","Don't have time, sorry!"],["You're welcome","You owe me one!","No problem"],["Goodbye","See you later","See you soon"]],Ke=["Anyone here?","Hello","Who is here?","How are you doing","I am here!","Am I alone here?"],Qe=["I have to leave!","I will be back soon","Have a nice day, bye!","I have to go"];var Ve=t=>(e,n)=>{if(n)return Qe[Math.floor(Math.random()*Ke.length)];if(!e)return Ke[Math.floor(Math.random()*Ke.length)];return((t,e)=>{for(let e=0;e<Je.length;e++)for(let n=0;n<Je[e].length;n++)if(t.includes(Je[e][n])){let t=Ye[e];return t[Math.floor(Math.random()*t.length)]}return null})(e.message.toLowerCase()).replace("[username]",t)};class Xe{client;options;username;password;roomID;userID;loopID;mastermind;unresponsive=0;messages=[{sender:"",message:""}];messageSentCounter=0;numberOfMessages;lastMessage={sender:"",message:""};lastMessageTime;constructor(t,e){let{username:n,password:s}=Ge();e.name&&(n=e.name),this.client=t,this.options=e||{},this.username=n,this.password=s,this.numberOfMessages=Math.floor(21*Math.random()+10),this.mastermind=Ve(this.username)}async start(){let t=await this.client.registerBot(this.username,this.password);if("User created"!==t.body.message||(t=await this.client.login(this.username,this.password),"Logged in"!==t.body.message))this.shutdown();else{this.userID=this.client.state.get().userID;try{await this.joinRoom()}catch(t){return void this.shutdown()}this.loop()}}async joinRoom(){const t=this.options.room?this.options.room:"Botroom";let e=await this.client.getRooms();for(const n of e.body.rooms)if(n.name===t)return await this.client.joinRoom(n.id,this.userID),void(this.roomID=n.id);await this.client.createRoom(t),e=await this.client.getRooms();for(const n of e.body.rooms)if(n.name===t)return this.roomID=n.id,void(this.admin=!0)}loop(){const t=this.client.fresh.add(1e3,(()=>this.client.getMessages(this.roomID)),this.updateMessages,this.shutdown);this.lastMessageTime=Date.now(),this.sendDelay(this.mastermind());const e=setInterval((()=>{const n=this.messages[this.messages.length-1]||{sender:"",message:""};if(this.lastMessage.message!==n.message&&n.sender!==this.username){if(this.messageSentCounter===this.numberOfMessages)return void this.shutdown(t,e);this.lastMessageTime=Date.now(),this.lastMessage=n,this.sendDelay(this.mastermind(n,!1))}else if(Date.now()-this.lastMessageTime>3e4){if(this.unresponsive+=1,2===this.unresponsive)return void this.shutdown();this.sendDelay(this.mastermind("",!1)),this.lastMessageTime=Date.now()}}),500);this.stopFresh=t,this.loopID=e}shutdown=async t=>{this.loopID&&clearInterval(this.loopID),this.stopFresh&&this.stopFresh(),"server down"!==t&&(this.roomID&&this.send(this.mastermind("",!0)),this.admin?this.logout():this.deregister())};updateMessages=t=>{this.messages=t.body.messages};send(t){this.messageSentCounter+=1;(async()=>{(await this.client.postMessage(this.roomID,this.userID,t)).body.error&&this.shutdown("server down")})()}sendDelay(t){let e=Math.floor(8*Math.random()+3);setTimeout((()=>{this.send(t)}),e)}async deregister(){await this.client.deleteUser(this.userID)}async logout(){await this.client.logout(this.client.state.get().token)}}function Ze(t){let e,n,s,o,r,a=(t[0]?t[0]:"bot")+"",i=t[2].name+"";return{c(){e=M("Add "),n=M(a),s=M(" to "),o=M(i),r=M(" +")},m(t,a){v(t,e,a),v(t,n,a),v(t,s,a),v(t,o,a),v(t,r,a)},p(t,e){1&e&&a!==(a=(t[0]?t[0]:"bot")+"")&&T(n,a),4&e&&i!==(i=t[2].name+"")&&T(o,i)},d(t){t&&w(e),t&&w(n),t&&w(s),t&&w(o),t&&w(r)}}}function tn(t){let e,n,s,o,r,a,i,c,l,u,d,h,m;return u=new ie({props:{action:t[3],$$slots:{default:[Ze]},$$scope:{ctx:t}}}),{c(){e=x("div"),n=x("div"),s=x("label"),s.textContent="New bot name:",o=I(),r=x("input"),a=I(),i=x("p"),c=M(t[1]),l=I(),ft(u.$$.fragment),C(s,"for","room-name"),C(r,"type","text"),C(r,"id","room-name"),C(i,"class","error svelte-9qzgh7"),C(e,"class","add-bot svelte-9qzgh7")},m(f,p){v(f,e,p),b(e,n),b(n,s),b(n,o),b(n,r),j(r,t[0]),b(n,a),b(n,i),b(i,c),b(e,l),pt(u,e,null),d=!0,h||(m=S(r,"input",t[5]),h=!0)},p(t,[e]){1&e&&r.value!==t[0]&&j(r,t[0]),(!d||2&e)&&T(c,t[1]);const n={};517&e&&(n.$$scope={dirty:e,ctx:t}),u.$set(n)},i(t){d||(lt(u.$$.fragment,t),d=!0)},o(t){ut(u.$$.fragment,t),d=!1},d(t){t&&w(e),gt(u),h=!1,m()}}}function en(t,e,n){let s;c(t,It,(t=>n(2,s=t)));let{room:o}=e;const r=B("host"),a=B("port"),i=B("client");let l="",u="";return t.$$set=t=>{"room"in t&&n(4,o=t.room)},[l,u,s,async()=>{const t=await i.getUsers();if(t.body.users){if(!l||l.length<3)return void n(1,u="Name must be 3 characters or longer");for(const e of t.body.users)if(e.username===l)return void n(1,u="A bot or user with that name allready exists")}((t,e)=>new Xe(t,e))(Zt({host:r,port:a}),{room:o,name:l}).start(),n(1,u=""),n(0,l="")},o,function(){l=this.value,n(0,l)}]}class nn extends bt{constructor(t){super(),yt(this,t,en,tn,a,{room:4})}}function sn(e){let n,s,o,r,a;return{c(){n=k("svg"),s=k("use"),o=I(),r=k("symbol"),a=k("path"),R(s,"xlink:href","#icon-user"),C(n,"class","icon icon-user svelte-8idrmo"),C(a,"d","M18 22.082v-1.649c2.203-1.241 4-4.337 4-7.432 0-4.971 0-9-6-9s-6 4.029-6 9c0 3.096 1.797 6.191 4 7.432v1.649c-6.784 0.555-12 3.888-12 7.918h28c0-4.030-5.216-7.364-12-7.918z"),C(r,"id","icon-user"),C(r,"viewBox","0 0 32 32")},m(t,e){v(t,n,e),b(n,s),v(t,o,e),v(t,r,e),b(r,a)},p:t,i:t,o:t,d(t){t&&w(n),t&&w(o),t&&w(r)}}}class on extends bt{constructor(t){super(),yt(this,t,null,sn,a,{})}}function rn(e){let n,s,o,r,a;return{c(){n=k("svg"),s=k("use"),o=I(),r=k("symbol"),a=k("path"),R(s,"xlink:href","#icon-f-droid"),C(n,"class","icon icon-f-droid svelte-8idrmo"),C(a,"d","M27.296 13.441h-22.592c-1.169 0-2.119 0.948-2.119 2.119v14.12c0 1.169 0.948 2.119 2.119 2.119h22.592c1.169 0 2.119-0.948 2.119-2.119v-14.12c0-1.171-0.949-2.119-2.119-2.119zM16 30.033c-4.088 0-7.413-3.325-7.413-7.413s3.325-7.413 7.413-7.413 7.413 3.325 7.413 7.413-3.325 7.413-7.413 7.413zM16 16.548c-3.348 0-6.072 2.724-6.072 6.072s2.724 6.072 6.072 6.072 6.072-2.724 6.072-6.072-2.724-6.072-6.072-6.072zM16 27.032c-2.084 0-3.841-1.471-4.295-3.424h2.227c0.367 0.775 1.145 1.305 2.068 1.305 1.28 0 2.295-1.015 2.295-2.295s-1.015-2.295-2.295-2.295c-0.865 0-1.6 0.469-1.991 1.165h-2.269c0.504-1.883 2.225-3.283 4.26-3.283 2.424 0 4.412 1.988 4.412 4.412 0 2.425-1.988 4.413-4.412 4.413zM31.799 0.528c-0.001 0.001-0.003 0.003-0.003 0.004-0.003-0.003-0.005-0.004-0.008-0.007 0.001-0.001 0.003-0.004 0.005-0.005-0.155-0.183-0.372-0.308-0.692-0.317-0.269 0.007-0.521 0.129-0.683 0.345l-2.424 3.137c-0.219-0.077-0.452-0.127-0.697-0.127h-22.593c-0.245 0-0.477 0.051-0.697 0.127l-2.424-3.139c-0.161-0.216-0.413-0.337-0.683-0.345-0.32 0.008-0.537 0.133-0.692 0.317 0.001 0.001 0.003 0.004 0.005 0.005-0.004 0.003-0.007 0.005-0.009 0.008 0-0.001-0.001-0.003-0.003-0.004-0.088 0.104-0.396 0.568-0.016 1.099l2.545 3.295c-0.089 0.235-0.144 0.488-0.144 0.755v4.943c0 1.169 0.948 2.119 2.119 2.119h22.592c1.169 0 2.119-0.948 2.119-2.119v-4.943c0-0.267-0.055-0.52-0.145-0.755l2.545-3.295c0.379-0.531 0.071-0.995-0.017-1.099zM9.205 10.971c-1.316 0-2.383-1.067-2.383-2.383s1.067-2.383 2.383-2.383 2.383 1.067 2.383 2.383-1.067 2.383-2.383 2.383zM22.972 10.971c-1.316 0-2.383-1.067-2.383-2.383s1.067-2.383 2.383-2.383 2.383 1.067 2.383 2.383-1.067 2.383-2.383 2.383z"),C(r,"id","icon-f-droid"),C(r,"viewBox","0 0 32 32")},m(t,e){v(t,n,e),b(n,s),v(t,o,e),v(t,r,e),b(r,a)},p:t,i:t,o:t,d(t){t&&w(n),t&&w(o),t&&w(r)}}}class an extends bt{constructor(t){super(),yt(this,t,null,rn,a,{})}}function cn(t,e,n){const s=t.slice();return s[8]=e[n],s}function ln(t){let e,n;return e=new on({}),{c(){ft(e.$$.fragment)},m(t,s){pt(e,t,s),n=!0},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){gt(e,t)}}}function un(t){let e,n;return e=new an({}),{c(){ft(e.$$.fragment)},m(t,s){pt(e,t,s),n=!0},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){gt(e,t)}}}function dn(t){let e;return{c(){e=x("p"),e.textContent="(you)",C(e,"class","admin svelte-1chyo9m")},m(t,n){v(t,e,n)},d(t){t&&w(e)}}}function hn(t){let e;return{c(){e=x("p"),e.textContent="(admin)",C(e,"class","admin svelte-1chyo9m")},m(t,n){v(t,e,n)},d(t){t&&w(e)}}}function mn(t){let e;return{c(){e=x("p"),e.textContent="(admin/you)",C(e,"class","admin svelte-1chyo9m")},m(t,n){v(t,e,n)},d(t){t&&w(e)}}}function fn(t,e){let n,s,o,r,a,i,c,l,u,d,h,m,f=e[8].username+"";const p=[un,ln],g=[];function $(t,e){return t[8].bot?0:1}function y(t,e){return(null==u||3&e)&&(u=!(t[8].id!==t[1].admin||t[8].id!==t[2].state.get().userID)),u?mn:t[8].id===t[1].admin?hn:((null==d||1&e)&&(d=!(t[8].id!==t[2].state.get().userID)),d?dn:void 0)}o=$(e),r=g[o]=p[o](e);let k=y(e,-1),_=k&&k(e);return{key:t,first:null,c(){n=x("li"),s=x("div"),r.c(),a=I(),i=x("p"),c=M(f),l=I(),_&&_.c(),h=I(),C(s,"class","user-name svelte-1chyo9m"),C(n,"class","svelte-1chyo9m"),this.first=n},m(t,e){v(t,n,e),b(n,s),g[o].m(s,null),b(s,a),b(s,i),b(i,c),b(n,l),_&&_.m(n,null),b(n,h),m=!0},p(t,i){let l=o;o=$(e=t),o!==l&&(it(),ut(g[l],1,1,(()=>{g[l]=null})),ct(),r=g[o],r||(r=g[o]=p[o](e),r.c()),lt(r,1),r.m(s,a)),(!m||1&i)&&f!==(f=e[8].username+"")&&T(c,f),k!==(k=y(e,i))&&(_&&_.d(1),_=k&&k(e),_&&(_.c(),_.m(n,h)))},i(t){m||(lt(r),m=!0)},o(t){ut(r),m=!1},d(t){t&&w(n),g[o].d(),_&&_.d()}}}function pn(t){let e,n,s=[],o=new Map,r=t[0];const a=t=>t[8].id;for(let e=0;e<r.length;e+=1){let n=cn(t,r,e),i=a(n);o.set(i,s[e]=fn(i,n))}return{c(){e=x("ul");for(let t=0;t<s.length;t+=1)s[t].c();C(e,"class","svelte-1chyo9m")},m(t,o){v(t,e,o);for(let t=0;t<s.length;t+=1)s[t].m(e,null);n=!0},p(t,[n]){7&n&&(r=t[0],it(),s=mt(s,n,a,1,t,r,o,e,ht,fn,null,cn),ct())},i(t){if(!n){for(let t=0;t<r.length;t+=1)lt(s[t]);n=!0}},o(t){for(let t=0;t<s.length;t+=1)ut(s[t]);n=!1},d(t){t&&w(e);for(let t=0;t<s.length;t+=1)s[t].d()}}}function gn(t,e,n){let s;c(t,It,(t=>n(1,s=t)));const o=B("client");let r,a=[];const i=t=>{t.body.users&&n(0,a=t.body.users)},l=async()=>{if(s){const t=await o.getUsersInRoom(s.id);i(t)}};N((()=>{l(),(async()=>{r=o.fresh.add(3e3,(()=>o.getUsersInRoom(s.id)),i)})()}));const u=It.subscribe((t=>l()));return A((()=>{r(),u()})),[a,s,o]}class $n extends bt{constructor(t){super(),yt(this,t,gn,pn,a,{})}}function yn(t,e,n){const s=t.slice();return s[16]=e[n],s}function bn(t){let e,n,s,o,r,a,i,c,l,u=t[16].sender+"",d=t[16].message+"";return{c(){e=x("div"),n=x("p"),s=M(u),o=M(":"),r=I(),a=x("div"),i=x("p"),c=M(d),l=I(),C(n,"class","author svelte-82a05y"),C(i,"class","message-text svelte-82a05y"),C(a,"class","message-bubble svelte-82a05y"),C(e,"class","message svelte-82a05y")},m(t,u){v(t,e,u),b(e,n),b(n,s),b(n,o),b(e,r),b(e,a),b(a,i),b(i,c),b(e,l)},p(t,e){1&e&&u!==(u=t[16].sender+"")&&T(s,u),1&e&&d!==(d=t[16].message+"")&&T(c,d)},d(t){t&&w(e)}}}function vn(t){let e,n,s,o,r;return o=new ie({props:{color:"red",action:t[6],$$slots:{default:[wn]},$$scope:{ctx:t}}}),{c(){e=x("div"),n=x("p"),n.textContent="Admin actions:",s=I(),ft(o.$$.fragment),C(e,"class","admin-actions svelte-82a05y")},m(t,a){v(t,e,a),b(e,n),b(e,s),pt(o,e,null),r=!0},p(t,e){const n={};524288&e&&(n.$$scope={dirty:e,ctx:t}),o.$set(n)},i(t){r||(lt(o.$$.fragment,t),r=!0)},o(t){ut(o.$$.fragment,t),r=!1},d(t){t&&w(e),gt(o)}}}function wn(t){let e;return{c(){e=M("Delete room")},m(t,n){v(t,e,n)},d(t){t&&w(e)}}}function xn(t){let e,n,s,r,a,i,c,l,u,d,h,m,f,p,g,$,y,k,M,_,D,R,T=t[0],E=[];for(let e=0;e<T.length;e+=1)E[e]=bn(yn(t,T,e));u=new Be({});let O=t[3].admin===t[4]&&vn(t);return y=new $n({}),M=new nn({props:{room:t[3].name}}),{c(){e=x("div"),n=x("div"),s=x("div");for(let t=0;t<E.length;t+=1)E[t].c();r=I(),a=x("div"),i=x("input"),c=I(),l=x("button"),ft(u.$$.fragment),h=I(),m=x("div"),O&&O.c(),f=I(),p=x("div"),g=x("p"),g.textContent="Users in room:",$=I(),ft(y.$$.fragment),k=I(),ft(M.$$.fragment),C(s,"class","feed svelte-82a05y"),C(i,"class","input-box svelte-82a05y"),C(i,"placeholder","type message..."),C(i,"type","text"),C(i,"rows","3"),l.disabled=d=0===t[1].length,C(l,"class","send-button svelte-82a05y"),C(a,"class","message-input svelte-82a05y"),C(n,"class","chat svelte-82a05y"),C(m,"class","metadata svelte-82a05y"),C(e,"class","room svelte-82a05y")},m(o,d){v(o,e,d),b(e,n),b(n,s);for(let t=0;t<E.length;t+=1)E[t].m(s,null);t[7](s),b(n,r),b(n,a),b(a,i),j(i,t[1]),b(a,c),b(a,l),pt(u,l,null),b(e,h),b(e,m),O&&O.m(m,null),b(m,f),b(m,p),b(p,g),b(p,$),pt(y,p,null),b(m,k),pt(M,m,null),_=!0,D||(R=[S(i,"keydown",t[8]),S(i,"input",t[9]),S(l,"click",t[5])],D=!0)},p(t,[e]){if(1&e){let n;for(T=t[0],n=0;n<T.length;n+=1){const o=yn(t,T,n);E[n]?E[n].p(o,e):(E[n]=bn(o),E[n].c(),E[n].m(s,null))}for(;n<E.length;n+=1)E[n].d(1);E.length=T.length}2&e&&i.value!==t[1]&&j(i,t[1]),(!_||2&e&&d!==(d=0===t[1].length))&&(l.disabled=d),t[3].admin===t[4]?O?(O.p(t,e),24&e&&lt(O,1)):(O=vn(t),O.c(),lt(O,1),O.m(m,f)):O&&(it(),ut(O,1,1,(()=>{O=null})),ct());const n={};8&e&&(n.room=t[3].name),M.$set(n)},i(t){_||(lt(u.$$.fragment,t),lt(O),lt(y.$$.fragment,t),lt(M.$$.fragment,t),_=!0)},o(t){ut(u.$$.fragment,t),ut(O),ut(y.$$.fragment,t),ut(M.$$.fragment,t),_=!1},d(n){n&&w(e),function(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}(E,n),t[7](null),gt(u),O&&O.d(),gt(y),gt(M),D=!1,o(R)}}}function kn(t,e,n){let s,o;c(t,It,(t=>n(3,s=t))),c(t,Mt,(t=>n(4,o=t)));let r,a,i=[],l="",u=B("client");const d=t=>{t.body.messages&&n(0,i=t.body.messages);let e=20;for(const t of a.children)e+=t.clientHeight,e+=20;setTimeout((()=>n(2,a.scrollTop=e,a)),50)},h=async()=>{if(s){const t=await u.getMessages(s.id);d(t)}},m=async()=>{if(!l)return;(await u.postMessage(s.id,o,l)).body.message&&n(1,l="")};N((()=>{h(),(async()=>{r=u.fresh.add(3e3,(()=>u.getMessages(s.id)),d)})()}));const f=It.subscribe((t=>{h()}));A((()=>{r(),f()}));return[i,l,a,s,o,m,async()=>{(await u.deleteRoom(s.id)).body.message&&function(t,e,n=e){t.set(n)}(It,s=null,s)},function(t){G[t?"unshift":"push"]((()=>{a=t,n(2,a)}))},t=>{13===t.keyCode&&m()},function(){l=this.value,n(1,l)}]}class Mn extends bt{constructor(t){super(),yt(this,t,kn,xn,a,{})}}function In(e){let n;return{c(){n=x("div"),n.innerHTML='<h1>Welcome!</h1> \n        <div><p class="sub svelte-9n71tp">This is a chat room for humans and bots :)</p> \n            <p class="sub svelte-9n71tp">Register or login to access the chat rooms.</p></div>',C(n,"class","welcome-box svelte-9n71tp")},m(t,e){v(t,n,e)},i:t,o:t,d(t){t&&w(n)}}}function _n(t){let e,n;return e=new Mn({}),{c(){ft(e.$$.fragment)},m(t,s){pt(e,t,s),n=!0},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){gt(e,t)}}}function Sn(t){let e,n,s,o;const r=[_n,In],a=[];function i(t,e){return t[0]?0:1}return e=i(t),n=a[e]=r[e](t),{c(){n.c(),s=_()},m(t,n){a[e].m(t,n),v(t,s,n),o=!0},p(t,[o]){let c=e;e=i(t),e!==c&&(it(),ut(a[c],1,1,(()=>{a[c]=null})),ct(),n=a[e],n||(n=a[e]=r[e](t),n.c()),lt(n,1),n.m(s.parentNode,s))},i(t){o||(lt(n),o=!0)},o(t){ut(n),o=!1},d(t){a[e].d(t),t&&w(s)}}}function Dn(t,e,n){let s;return c(t,It,(t=>n(0,s=t))),[s]}class Cn extends bt{constructor(t){super(),yt(this,t,Dn,Sn,a,{})}}function Rn(t){let e,n,s,o,r,a,i,c;return e=new xe({}),o=new Ae({}),i=new Cn({}),{c(){ft(e.$$.fragment),n=I(),s=x("div"),ft(o.$$.fragment),r=I(),a=x("main"),ft(i.$$.fragment),C(a,"class","svelte-1tdyujj"),C(s,"class","content svelte-1tdyujj")},m(t,l){pt(e,t,l),v(t,n,l),v(t,s,l),pt(o,s,null),b(s,r),b(s,a),pt(i,a,null),c=!0},i(t){c||(lt(e.$$.fragment,t),lt(o.$$.fragment,t),lt(i.$$.fragment,t),c=!0)},o(t){ut(e.$$.fragment,t),ut(o.$$.fragment,t),ut(i.$$.fragment,t),c=!1},d(t){gt(e,t),t&&w(n),t&&w(s),gt(o),gt(i)}}}function Tn(t){let e,n;return e=new Lt({props:{url:t[0],$$slots:{default:[Rn]},$$scope:{ctx:t}}}),{c(){ft(e.$$.fragment)},m(t,s){pt(e,t,s),n=!0},p(t,[n]){const s={};1&n&&(s.url=t[0]),128&n&&(s.$$scope={dirty:n,ctx:t}),e.$set(s)},i(t){n||(lt(e.$$.fragment,t),n=!0)},o(t){ut(e.$$.fragment,t),n=!1},d(t){gt(e,t)}}}function jn(t,e,n){let s,o;c(t,kt,(t=>n(4,s=t))),c(t,Mt,(t=>n(5,o=t)));let{url:r=""}=e,{host:a=window.location.hostname}=e,{port:i=window.location.port}=e;const l=Zt({host:a,port:i});let u;return H("client",l),H("host",a),H("port",i),s&&l.state.update({token:s}),o&&l.state.update({userID:o}),N((()=>{u=l.state.subscribe((t=>{t.token&&"string"==typeof t.token?kt.set(t.token):(kt.set(""),It.set(null)),t.userID&&"string"==typeof t.userID?Mt.set(t.userID):Mt.set("")}))})),A((()=>{u()})),t.$$set=t=>{"url"in t&&n(0,r=t.url),"host"in t&&n(1,a=t.host),"port"in t&&n(2,i=t.port)},[r,a,i]}return new class extends bt{constructor(t){super(),yt(this,t,jn,Tn,a,{url:0,host:1,port:2})}}({target:document.body,props:{host:"localhost",port:"5000"}})}();
//# sourceMappingURL=bundle.js.map
