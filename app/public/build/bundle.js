var app=function(){"use strict";function e(){}const t=e=>e;function s(e){return e()}function n(){return Object.create(null)}function o(e){e.forEach(s)}function r(e){return"function"==typeof e}function a(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(t,s,n){t.$$.on_destroy.push(function(t,...s){if(null==t)return e;const n=t.subscribe(...s);return n.unsubscribe?()=>n.unsubscribe():n}(s,n))}function l(e,t,s,n){return e[1]&&n?function(e,t){for(const s in t)e[s]=t[s];return e}(s.ctx.slice(),e[1](n(t))):s.ctx}function c(e,t,s,n,o,r,a){const i=function(e,t,s,n){if(e[2]&&n){const o=e[2](n(s));if(void 0===t.dirty)return o;if("object"==typeof o){const e=[],s=Math.max(t.dirty.length,o.length);for(let n=0;n<s;n+=1)e[n]=t.dirty[n]|o[n];return e}return t.dirty|o}return t.dirty}(t,n,o,r);if(i){const o=l(t,s,n,a);e.p(o,i)}}function u(e){return null==e?"":e}const d="undefined"!=typeof window;let h=d?()=>window.performance.now():()=>Date.now(),m=d?e=>requestAnimationFrame(e):e;const f=new Set;function p(e){f.forEach((t=>{t.c(e)||(f.delete(t),t.f())})),0!==f.size&&m(p)}function g(e){let t;return 0===f.size&&m(p),{promise:new Promise((s=>{f.add(t={c:e,f:s})})),abort(){f.delete(t)}}}function y(e,t){e.appendChild(t)}function $(e,t,s){e.insertBefore(t,s||null)}function b(e){e.parentNode.removeChild(e)}function w(e){return document.createElement(e)}function v(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function k(e){return document.createTextNode(e)}function x(){return k(" ")}function M(){return k("")}function I(e,t,s,n){return e.addEventListener(t,s,n),()=>e.removeEventListener(t,s,n)}function j(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function D(e,t,s){null==s?e.removeAttribute(t):e.getAttribute(t)!==s&&e.setAttribute(t,s)}function _(e,t,s){e.setAttributeNS("http://www.w3.org/1999/xlink",t,s)}function T(e,t){t=""+t,e.wholeText!==t&&(e.data=t)}function C(e,t){e.value=null==t?"":t}const S=new Set;let O,R=0;function q(e,t,s,n,o,r,a,i=0){const l=16.666/n;let c="{\n";for(let e=0;e<=1;e+=l){const n=t+(s-t)*r(e);c+=100*e+`%{${a(n,1-n)}}\n`}const u=c+`100% {${a(s,1-s)}}\n}`,d=`__svelte_${function(e){let t=5381,s=e.length;for(;s--;)t=(t<<5)-t^e.charCodeAt(s);return t>>>0}(u)}_${i}`,h=e.ownerDocument;S.add(h);const m=h.__svelte_stylesheet||(h.__svelte_stylesheet=h.head.appendChild(w("style")).sheet),f=h.__svelte_rules||(h.__svelte_rules={});f[d]||(f[d]=!0,m.insertRule(`@keyframes ${d} ${u}`,m.cssRules.length));const p=e.style.animation||"";return e.style.animation=`${p?`${p}, `:""}${d} ${n}ms linear ${o}ms 1 both`,R+=1,d}function E(e,t){const s=(e.style.animation||"").split(", "),n=s.filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")),o=s.length-n.length;o&&(e.style.animation=n.join(", "),R-=o,R||m((()=>{R||(S.forEach((e=>{const t=e.__svelte_stylesheet;let s=t.cssRules.length;for(;s--;)t.deleteRule(s);e.__svelte_rules={}})),S.clear())})))}function z(e){O=e}function N(){if(!O)throw new Error("Function called outside component initialization");return O}function U(e){N().$$.on_mount.push(e)}function H(e){N().$$.on_destroy.push(e)}function P(e,t){N().$$.context.set(e,t)}function A(e){return N().$$.context.get(e)}function L(e,t){const s=e.$$.callbacks[t.type];s&&s.slice().forEach((e=>e(t)))}const B=[],F=[],J=[],W=[],Y=Promise.resolve();let G=!1;function K(e){J.push(e)}let Q=!1;const V=new Set;function X(){if(!Q){Q=!0;do{for(let e=0;e<B.length;e+=1){const t=B[e];z(t),Z(t.$$)}for(z(null),B.length=0;F.length;)F.pop()();for(let e=0;e<J.length;e+=1){const t=J[e];V.has(t)||(V.add(t),t())}J.length=0}while(B.length);for(;W.length;)W.pop()();G=!1,Q=!1,V.clear()}}function Z(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(K)}}let ee;function te(){return ee||(ee=Promise.resolve(),ee.then((()=>{ee=null}))),ee}function se(e,t,s){e.dispatchEvent(function(e,t){const s=document.createEvent("CustomEvent");return s.initCustomEvent(e,!1,!1,t),s}(`${t?"intro":"outro"}${s}`))}const ne=new Set;let oe;function re(){oe={r:0,c:[],p:oe}}function ae(){oe.r||o(oe.c),oe=oe.p}function ie(e,t){e&&e.i&&(ne.delete(e),e.i(t))}function le(e,t,s,n){if(e&&e.o){if(ne.has(e))return;ne.add(e),oe.c.push((()=>{ne.delete(e),n&&(s&&e.d(1),n())})),e.o(t)}}const ce={duration:0};function ue(e,t){le(e,1,1,(()=>{t.delete(e.key)}))}function de(e,t,s,n,o,r,a,i,l,c,u,d){let h=e.length,m=r.length,f=h;const p={};for(;f--;)p[e[f].key]=f;const g=[],y=new Map,$=new Map;for(f=m;f--;){const e=d(o,r,f),i=s(e);let l=a.get(i);l?n&&l.p(e,t):(l=c(i,e),l.c()),y.set(i,g[f]=l),i in p&&$.set(i,Math.abs(f-p[i]))}const b=new Set,w=new Set;function v(e){ie(e,1),e.m(i,u),a.set(e.key,e),u=e.first,m--}for(;h&&m;){const t=g[m-1],s=e[h-1],n=t.key,o=s.key;t===s?(u=t.first,h--,m--):y.has(o)?!a.has(n)||b.has(n)?v(t):w.has(o)?h--:$.get(n)>$.get(o)?(w.add(n),v(t)):(b.add(o),h--):(l(s,a),h--)}for(;h--;){const t=e[h];y.has(t.key)||l(t,a)}for(;m;)v(g[m-1]);return g}function he(e){e&&e.c()}function me(e,t,n,a){const{fragment:i,on_mount:l,on_destroy:c,after_update:u}=e.$$;i&&i.m(t,n),a||K((()=>{const t=l.map(s).filter(r);c?c.push(...t):o(t),e.$$.on_mount=[]})),u.forEach(K)}function fe(e,t){const s=e.$$;null!==s.fragment&&(o(s.on_destroy),s.fragment&&s.fragment.d(t),s.on_destroy=s.fragment=null,s.ctx=[])}function pe(e,t){-1===e.$$.dirty[0]&&(B.push(e),G||(G=!0,Y.then(X)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ge(t,s,r,a,i,l,c=[-1]){const u=O;z(t);const d=t.$$={fragment:null,ctx:null,props:l,update:e,not_equal:i,bound:n(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:s.context||[]),callbacks:n(),dirty:c,skip_bound:!1};let h=!1;if(d.ctx=r?r(t,s.props||{},((e,s,...n)=>{const o=n.length?n[0]:s;return d.ctx&&i(d.ctx[e],d.ctx[e]=o)&&(!d.skip_bound&&d.bound[e]&&d.bound[e](o),h&&pe(t,e)),s})):[],d.update(),h=!0,o(d.before_update),d.fragment=!!a&&a(d.ctx),s.target){if(s.hydrate){const e=function(e){return Array.from(e.childNodes)}(s.target);d.fragment&&d.fragment.l(e),e.forEach(b)}else d.fragment&&d.fragment.c();s.intro&&ie(t.$$.fragment),me(t,s.target,s.anchor,s.customElement),X()}z(u)}class ye{$destroy(){fe(this,1),this.$destroy=e}$on(e,t){const s=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return s.push(t),()=>{const e=s.indexOf(t);-1!==e&&s.splice(e,1)}}$set(e){var t;this.$$set&&(t=e,0!==Object.keys(t).length)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const $e=[];function be(t,s=e){let n;const o=[];function r(e){if(a(t,e)&&(t=e,n)){const e=!$e.length;for(let e=0;e<o.length;e+=1){const s=o[e];s[1](),$e.push(s,t)}if(e){for(let e=0;e<$e.length;e+=2)$e[e][0]($e[e+1]);$e.length=0}}}return{set:r,update:function(e){r(e(t))},subscribe:function(a,i=e){const l=[a,i];return o.push(l),1===o.length&&(n=s(r)||e),a(t),()=>{const e=o.indexOf(l);-1!==e&&o.splice(e,1),0===o.length&&(n(),n=null)}}}}const we=function(){const e=localStorage.getItem("auth")?localStorage.getItem("auth"):"",{subscribe:t,set:s,update:n}=be(e);return{subscribe:t,set:e=>{s(e),localStorage.setItem("auth",e)}}}();const ve=function(){const e=localStorage.getItem("user")?localStorage.getItem("user"):"",{subscribe:t,set:s,update:n}=be(e);return{subscribe:t,set:e=>{s(e),localStorage.setItem("user",e)}}}(),ke=be(null);var xe=()=>{const e=[],t=(e=>t=>{const s={path:t.path||"/",method:t.method||"GET",headers:t.headers||{},body:t.body||{}},n=[...e];return new Promise(((e,t)=>{const o={status:200,body:{},err:e=>{t(e)},end:()=>{e({status:o.status,body:o.body})}},r=e=>{if(!e){const e=n.shift();e&&e(s,o,r)}};r()}))})(e);return{use:t=>e.push(t),post:(e,s)=>t({path:e,method:"POST",...s}),get:(e,s)=>t({path:e,method:"GET",...s}),put:(e,s)=>t({path:e,method:"PUT",...s}),delete:(e,s)=>t({path:e,method:"DELETE",...s})}};let Me;Me="object"==typeof process?"node":"browser";const Ie={env:Me,push:"node"===Me&&process.env.PUSH||!0,host:"node"===Me&&process.env.HOST||"localhost",port:"node"===Me&&process.env.PORT||5e3};class je{state;subscribers;constructor(){this.state={},this.subscribers=[]}get(){return{...this.state}}update(e){this.state={...this.state,...e};for(const e of this.subscribers)e({...this.state})}subscribe(e){return this.subscribers.push(e),()=>this.subscribers.splice(this.subscribers.indexOf(e),1)}}const De=async(e,t,s)=>{try{t(await e())}catch(e){console.log("Error while fetching. Stopping"),console.log(e),errCallback&&errCallback(),s()}};class _e{subs;started;constructor(){this.subs=new Map,this.started=!1,this.createStopper=e=>()=>{this.subs.delete(e),clearInterval(e)},this.add=(e,t,s,n)=>{const o=setInterval((()=>{this.started&&De(t,s,this.createStopper(o))}),e);return this.subs.set(o,{interval:e,func:t,callback:s,errCallback:n}),this.createStopper(o)},this.update=()=>{for(const[e,{func:t,callback:s,errCallback:n}]of this.subs)De(t,s,this.createStopper(e))}}}var Te="browser"===Ie.env?(e,{update:t,state:s})=>{let n,o=t;s.subscribe((({token:t})=>{t&&!n?(n=(e=>{const t=new WebSocket(e);return t.onerror=e=>{console.log(e),t.close()},t})(e),n.onopen=()=>n.send(t),n.onmessage=e=>{o()}):!t&&n&&(n.close(),n=null)}))}:(e,{SocketModule:t,update:s,state:n})=>{let o,r=s;n.subscribe((({token:s})=>{s&&!o?(o=((e,t)=>{const s=new t(e);return s.on("error",(e=>{console.log(e),s.close()})),s})(e,t),o.on("open",(()=>o.send(s))),o.on("message",(e=>{r()}))):!s&&o&&(o.close(),o=null)}))},Ce=(e,t,s)=>{"POST"!==e.method&&"PUT"!==e.method||(e.headers["Content-Type"]="application/json"),s()};let Se,Oe;const Re=async(e,t,s)=>{try{const{path:n,method:o,headers:r,body:a}=e,i=Se.port?`http://${Se.host}:${Se.port}${n}`:`http://${Se.host}${n}`,l=await fetch(i,{method:o,headers:r,body:"POST"===o||"PUT"==o?JSON.stringify(a):null});if("application/json; charset=utf-8"===l.headers.get("Content-Type")){const e=await l.json();t.status=l.status,t.body=e}else console.log(await l.text());s()}catch(e){t.status=408,t.body={error:"Could not connect to the server"},s()}},qe=async(e,t,s)=>{try{const{path:n,method:o,headers:r,body:a}=e,i=JSON.stringify(a),l={hostname:Se.host,port:Se.port,path:n,method:o,headers:{...r,"Content-Length":i.length}},c=Oe.request(l,(e=>{t.status=e.statusCode;let n="";e.on("data",(e=>{n+=e})),e.on("end",(()=>{const e=JSON.parse(n);t.body=e,s()}))}));c.on("error",(e=>{console.error(e)})),c.write(i),c.end()}catch(e){t.status=408,t.body={error:"Could not connect to the server"},s()}};var Ee="browser"===Ie.env?e=>(Se=e,Re):(e,t)=>(Oe=t,Se=e,qe);var ze=(e,t,s)=>{if(!t&&"node"===Ie.env)throw new Error("Http module is required as input when running in node");"object"==typeof e&&Object.assign(Ie,e);const n=xe(),o=new je;n.use((e=>(t,s,n)=>{if(("/api/users"===t.path||"/api/tokens"===t.path)&&"POST"===t.method)return void n();const{token:o}=e.get();o&&"string"==typeof o&&(t.headers.Token=o),n()})(o)),n.use(Ce),n.use(Ee(Ie,t)),n.use((e=>(t,s,n)=>{s.body.token&&"string"==typeof s.body.token&&e.update({token:s.body.token}),s.body.message&&"Logged out"===s.body.message&&e.update({token:null,userID:null}),s.body.message&&"User deleted"===s.body.message&&e.update({token:null,userID:null}),s.body.error&&"Session not found"===s.body.error&&e.update({token:null,userID:null}),s.body.userID&&"string"==typeof s.body.userID&&e.update({userID:s.body.userID}),s.end()})(o));const r=(a=n,{register:(e,t)=>a.post("/api/users",{body:{username:e,password:t}}),registerBot:(e,t)=>a.post("/api/users",{body:{username:e,password:t,bot:!0}}),getUsers:()=>a.get("/api/users"),getUser:e=>a.get(`/api/user/${e}`),deleteUser:e=>a.delete(`/api/user/${e}`),login:(e,t)=>a.post("/api/tokens",{body:{username:e,password:t}}),getTokens:()=>a.get("/api/tokens"),extendToken:e=>a.post(`/api/token/${e}`),logout:e=>a.delete(`/api/token/${e}`),createRoom:e=>a.post("/api/rooms",{body:{name:e}}),getRooms:()=>a.get("/api/rooms"),getRoom:e=>a.get(`/api/room/${e}`),deleteRoom:e=>a.delete(`/api/room/${e}`),joinRoom:(e,t)=>a.post(`/api/room/${e}/users`,{body:{user:t}}),getUsersInRoom:e=>a.get(`/api/room/${e}/users`),getMessages:e=>a.get(`/api/room/${e}/messages`),postMessage:(e,t,s)=>a.post(`/api/room/${e}/${t}/messages`,{body:{message:s}}),getMessagesFromUser:(e,t)=>a.get(`/room/${e}/${t}/messages`),checkPush:()=>a.get("/api/push")});var a;r.state=o,r.fresh=new _e;return Te(Ie.port?`ws://${Ie.host}:${Ie.port}`:`ws://${Ie.host}`,{SocketModule:s,update:r.fresh.update,state:o}),(async e=>{"disabled"!==(await e.checkPush()).body.push&&Ie.push||e.fresh.start()})(r),r};function Ne(t){let s,n,o,r,a;return{c(){s=v("svg"),n=v("use"),o=x(),r=v("symbol"),a=v("path"),_(n,"xlink:href","#icon-bubbles"),D(s,"class","icon icon-bubbles svelte-1m14we6"),D(a,"d","M34 28.161c0 1.422 0.813 2.653 2 3.256v0.498c-0.332 0.045-0.671 0.070-1.016 0.070-2.125 0-4.042-0.892-5.398-2.321-0.819 0.218-1.688 0.336-2.587 0.336-4.971 0-9-3.582-9-8s4.029-8 9-8c4.971 0 9 3.582 9 8 0 1.73-0.618 3.331-1.667 4.64-0.213 0.463-0.333 0.979-0.333 1.522zM16 0c8.702 0 15.781 5.644 15.995 12.672-1.537-0.685-3.237-1.047-4.995-1.047-2.986 0-5.807 1.045-7.942 2.943-2.214 1.968-3.433 4.607-3.433 7.432 0 1.396 0.298 2.747 0.867 3.993-0.163 0.004-0.327 0.007-0.492 0.007-0.849 0-1.682-0.054-2.495-0.158-3.437 3.437-7.539 4.053-11.505 4.144v-0.841c2.142-1.049 4-2.961 4-5.145 0-0.305-0.024-0.604-0.068-0.897-3.619-2.383-5.932-6.024-5.932-10.103 0-7.18 7.163-13 16-13z"),D(r,"id","icon-bubbles"),D(r,"viewBox","0 0 36 32")},m(e,t){$(e,s,t),y(s,n),$(e,o,t),$(e,r,t),y(r,a)},p:e,i:e,o:e,d(e){e&&b(s),e&&b(o),e&&b(r)}}}class Ue extends ye{constructor(e){super(),ge(this,e,null,Ne,a,{})}}function He(e,{delay:s=0,duration:n=400,easing:o=t}={}){const r=+getComputedStyle(e).opacity;return{delay:s,duration:n,easing:o,css:e=>"opacity: "+e*r}}function Pe(t){let s,n,o,r,a;return{c(){s=v("svg"),n=v("use"),o=x(),r=v("symbol"),a=v("path"),_(n,"xlink:href","#icon-cross"),D(s,"class","icon icon-cross svelte-1qil70w"),D(a,"d","M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"),D(r,"id","icon-cross"),D(r,"viewBox","0 0 20 20")},m(e,t){$(e,s,t),y(s,n),$(e,o,t),$(e,r,t),y(r,a)},p:e,i:e,o:e,d(e){e&&b(s),e&&b(o),e&&b(r)}}}class Ae extends ye{constructor(e){super(),ge(this,e,null,Pe,a,{})}}function Le(e){let t,s,n,o,a;const i=e[3].default,d=function(e,t,s,n){if(e){const o=l(e,t,s,n);return e[0](o)}}(i,e,e[2],null);return{c(){t=w("button"),d&&d.c(),D(t,"class",s=u(e[1])+" svelte-1llkmww")},m(s,i){$(s,t,i),d&&d.m(t,null),n=!0,o||(a=I(t,"click",(function(){r(e[0])&&e[0].apply(this,arguments)})),o=!0)},p(o,[r]){e=o,d&&d.p&&4&r&&c(d,i,e,e[2],r,null,null),(!n||2&r&&s!==(s=u(e[1])+" svelte-1llkmww"))&&D(t,"class",s)},i(e){n||(ie(d,e),n=!0)},o(e){le(d,e),n=!1},d(e){e&&b(t),d&&d.d(e),o=!1,a()}}}function Be(e,t,s){let{$$slots:n={},$$scope:o}=t,{action:r=(()=>{})}=t,{color:a="blue"}=t;return e.$$set=e=>{"action"in e&&s(0,r=e.action),"color"in e&&s(1,a=e.color),"$$scope"in e&&s(2,o=e.$$scope)},[r,a,o,n]}class Fe extends ye{constructor(e){super(),ge(this,e,Be,Le,a,{action:0,color:1})}}function Je(e){let t;return{c(){t=k(e[0])},m(e,s){$(e,t,s)},p(e,s){1&s&&T(t,e[0])},d(e){e&&b(t)}}}function We(s){let n,a,i,l,c,u,d,m,f,p,v,M,_,S,O,R,z,N,U,H,P,A,L,B,F,J,W,Y,G;return l=new Ae({}),B=new Fe({props:{action:s[5],$$slots:{default:[Ye]},$$scope:{ctx:s}}}),{c(){n=w("div"),a=w("div"),i=w("button"),he(l.$$.fragment),c=x(),u=w("h3"),d=k(s[0]),m=x(),f=w("form"),p=w("div"),v=w("label"),v.textContent="Username:",M=x(),_=w("input"),S=x(),O=w("div"),R=w("label"),R.textContent="Password:",z=x(),N=w("input"),U=x(),H=w("div"),P=w("p"),A=k(s[2]),L=x(),he(B.$$.fragment),D(i,"class","cross svelte-bjlt99"),D(v,"for","username"),D(_,"id","username"),D(_,"type","text"),D(p,"class","form-group"),D(R,"for","password"),D(N,"id","password"),D(N,"type","password"),D(O,"class","form-group"),D(H,"class","error svelte-bjlt99"),D(f,"class","form svelte-bjlt99"),D(a,"class","modal svelte-bjlt99"),D(n,"class","background svelte-bjlt99")},m(e,t){var o;$(e,n,t),y(n,a),y(a,i),me(l,i,null),y(a,c),y(a,u),y(u,d),y(a,m),y(a,f),y(f,p),y(p,v),y(p,M),y(p,_),C(_,s[3]),y(f,S),y(f,O),y(O,R),y(O,z),y(O,N),C(N,s[4]),y(f,U),y(f,H),y(H,P),y(P,A),y(f,L),me(B,f,null),W=!0,Y||(G=[I(i,"click",s[9]),I(_,"input",s[10]),I(N,"input",s[11]),I(f,"submit",(o=s[7],function(e){return e.preventDefault(),o.call(this,e)})),I(a,"click",j(s[6])),I(n,"click",s[12])],Y=!0)},p(e,t){(!W||1&t)&&T(d,e[0]),8&t&&_.value!==e[3]&&C(_,e[3]),16&t&&N.value!==e[4]&&C(N,e[4]),(!W||4&t)&&T(A,e[2]);const s={};65537&t&&(s.$$scope={dirty:t,ctx:e}),B.$set(s)},i(s){W||(ie(l.$$.fragment,s),ie(B.$$.fragment,s),K((()=>{J&&J.end(1),F||(F=function(s,n,o){let a,i,l=n(s,o),c=!1,u=0;function d(){a&&E(s,a)}function m(){const{delay:n=0,duration:o=300,easing:r=t,tick:m=e,css:f}=l||ce;f&&(a=q(s,0,1,o,n,r,f,u++)),m(0,1);const p=h()+n,y=p+o;i&&i.abort(),c=!0,K((()=>se(s,!0,"start"))),i=g((e=>{if(c){if(e>=y)return m(1,0),se(s,!0,"end"),d(),c=!1;if(e>=p){const t=r((e-p)/o);m(t,1-t)}}return c}))}let f=!1;return{start(){f||(E(s),r(l)?(l=l(),te().then(m)):m())},invalidate(){f=!1},end(){c&&(d(),c=!1)}}}(n,He,{duration:200})),F.start()})),W=!0)},o(s){le(l.$$.fragment,s),le(B.$$.fragment,s),F&&F.invalidate(),J=function(s,n,a){let i,l=n(s,a),c=!0;const u=oe;function d(){const{delay:n=0,duration:r=300,easing:a=t,tick:d=e,css:m}=l||ce;m&&(i=q(s,1,0,r,n,a,m));const f=h()+n,p=f+r;K((()=>se(s,!1,"start"))),g((e=>{if(c){if(e>=p)return d(0,1),se(s,!1,"end"),--u.r||o(u.c),!1;if(e>=f){const t=a((e-f)/r);d(1-t,t)}}return c}))}return u.r+=1,r(l)?te().then((()=>{l=l(),d()})):d(),{end(e){e&&l.tick&&l.tick(1,0),c&&(i&&E(s,i),c=!1)}}}(n,He,{duration:200}),W=!1},d(e){e&&b(n),fe(l),fe(B),e&&J&&J.end(),Y=!1,o(G)}}}function Ye(e){let t;return{c(){t=k(e[0])},m(e,s){$(e,t,s)},p(e,s){1&s&&T(t,e[0])},d(e){e&&b(t)}}}function Ge(e){let t,s,n,o;s=new Fe({props:{action:e[8],$$slots:{default:[Je]},$$scope:{ctx:e}}});let r=e[1]&&We(e);return{c(){t=w("div"),he(s.$$.fragment),n=x(),r&&r.c(),D(t,"class","dropdown svelte-bjlt99")},m(e,a){$(e,t,a),me(s,t,null),y(t,n),r&&r.m(t,null),o=!0},p(e,[n]){const o={};2&n&&(o.action=e[8]),65537&n&&(o.$$scope={dirty:n,ctx:e}),s.$set(o),e[1]?r?(r.p(e,n),2&n&&ie(r,1)):(r=We(e),r.c(),ie(r,1),r.m(t,null)):r&&(re(),le(r,1,1,(()=>{r=null})),ae())},i(e){o||(ie(s.$$.fragment,e),ie(r),o=!0)},o(e){le(s.$$.fragment,e),le(r),o=!1},d(e){e&&b(t),fe(s),r&&r.d()}}}function Ke(e,t,s){let n,o,{action:r="Register"}=t,a=!1,i="",l=A("client");const c=async()=>await l.login(n,o),u=async()=>{const e=await l.register(n,o);return e.body.message&&c(),e};return e.$$set=e=>{"action"in e&&s(0,r=e.action)},[r,a,i,n,o,async()=>{const e="Register"===r?u:c;let t=await e();t.body.error&&s(2,i=t.body.error),t.body.message&&(s(1,a=!1),s(2,i=""),s(3,n=""),s(4,o=""))},function(t){L(e,t)},function(t){L(e,t)},()=>s(1,a=!0),()=>s(1,a=!1),function(){n=this.value,s(3,n)},function(){o=this.value,s(4,o)},()=>s(1,a=!1)]}class Qe extends ye{constructor(e){super(),ge(this,e,Ke,Ge,a,{action:0})}}function Ve(t){let s,n,o;return{c(){s=w("p"),n=k("You are logged in as "),o=k(t[0]),D(s,"class","svelte-12r322e")},m(e,t){$(e,s,t),y(s,n),y(s,o)},p(e,[t]){1&t&&T(o,e[0])},i:e,o:e,d(e){e&&b(s)}}}function Xe(e,t,s){let n;i(e,ve,(e=>s(1,n=e)));const o=A("client");let r="";return(async()=>{const e=await o.getUser(n);e.body.user&&s(0,r=e.body.user.username)})(),[r]}class Ze extends ye{constructor(e){super(),ge(this,e,Xe,Ve,a,{})}}function et(e){let t,s,n,o,r,a;return s=new Ze({}),r=new Fe({props:{action:e[2],$$slots:{default:[st]},$$scope:{ctx:e}}}),{c(){t=w("li"),he(s.$$.fragment),n=x(),o=w("li"),he(r.$$.fragment)},m(e,i){$(e,t,i),me(s,t,null),$(e,n,i),$(e,o,i),me(r,o,null),a=!0},p(e,t){const s={};16&t&&(s.$$scope={dirty:t,ctx:e}),r.$set(s)},i(e){a||(ie(s.$$.fragment,e),ie(r.$$.fragment,e),a=!0)},o(e){le(s.$$.fragment,e),le(r.$$.fragment,e),a=!1},d(e){e&&b(t),fe(s),e&&b(n),e&&b(o),fe(r)}}}function tt(t){let s,n,o,r,a,i;return n=new Qe({props:{action:"Login"}}),a=new Qe({props:{action:"Register"}}),{c(){s=w("li"),he(n.$$.fragment),o=x(),r=w("li"),he(a.$$.fragment)},m(e,t){$(e,s,t),me(n,s,null),$(e,o,t),$(e,r,t),me(a,r,null),i=!0},p:e,i(e){i||(ie(n.$$.fragment,e),ie(a.$$.fragment,e),i=!0)},o(e){le(n.$$.fragment,e),le(a.$$.fragment,e),i=!1},d(e){e&&b(s),fe(n),e&&b(o),e&&b(r),fe(a)}}}function st(e){let t;return{c(){t=k("Logout")},m(e,s){$(e,t,s)},d(e){e&&b(t)}}}function nt(e){let t,s,n,o,r,a,i,l,c,u,d,h,m,f,p,g=(e[1]?e[1].name:"")+"";n=new Ue({});const v=[tt,et],M=[];function I(e,t){return e[0]?1:0}return m=I(e),f=M[m]=v[m](e),{c(){t=w("header"),s=w("div"),he(n.$$.fragment),o=x(),r=w("h1"),r.textContent="ChatApp",a=x(),i=w("div"),l=w("h2"),c=k(g),u=x(),d=w("nav"),h=w("ul"),f.c(),D(r,"class","svelte-g75w2"),D(s,"class","logo svelte-g75w2"),D(l,"class","svelte-g75w2"),D(i,"class","room-title"),D(h,"class","svelte-g75w2"),D(t,"class","svelte-g75w2")},m(e,f){$(e,t,f),y(t,s),me(n,s,null),y(s,o),y(s,r),y(t,a),y(t,i),y(i,l),y(l,c),y(t,u),y(t,d),y(d,h),M[m].m(h,null),p=!0},p(e,[t]){(!p||2&t)&&g!==(g=(e[1]?e[1].name:"")+"")&&T(c,g);let s=m;m=I(e),m===s?M[m].p(e,t):(re(),le(M[s],1,1,(()=>{M[s]=null})),ae(),f=M[m],f?f.p(e,t):(f=M[m]=v[m](e),f.c()),ie(f,1),f.m(h,null))},i(e){p||(ie(n.$$.fragment,e),ie(f),p=!0)},o(e){le(n.$$.fragment,e),le(f),p=!1},d(e){e&&b(t),fe(n),M[m].d()}}}function ot(e,t,s){let n,o;i(e,we,(e=>s(0,n=e))),i(e,ke,(e=>s(1,o=e)));const r=A("client");return[n,o,async()=>{await r.logout(n)}]}class rt extends ye{constructor(e){super(),ge(this,e,ot,nt,a,{})}}function at(t){let s,n,o,r,a;return{c(){s=v("svg"),n=v("use"),o=x(),r=v("symbol"),a=v("path"),_(n,"xlink:href","#icon-home"),D(s,"class","icon icon-home svelte-8idrmo"),D(a,"d","M18.672 11h-1.672v6c0 0.445-0.194 1-1 1h-4v-6h-4v6h-4c-0.806 0-1-0.555-1-1v-6h-1.672c-0.598 0-0.47-0.324-0.060-0.748l8.024-8.032c0.195-0.202 0.451-0.302 0.708-0.312 0.257 0.010 0.513 0.109 0.708 0.312l8.023 8.031c0.411 0.425 0.539 0.749-0.059 0.749z"),D(r,"id","icon-home"),D(r,"viewBox","0 0 20 20")},m(e,t){$(e,s,t),y(s,n),$(e,o,t),$(e,r,t),y(r,a)},p:e,i:e,o:e,d(e){e&&b(s),e&&b(o),e&&b(r)}}}class it extends ye{constructor(e){super(),ge(this,e,null,at,a,{})}}function lt(e,t,s){const n=e.slice();return n[16]=t[s],n}function ct(e,t,s){const n=e.slice();return n[16]=t[s],n}function ut(t){let s;return{c(){s=w("p"),s.textContent="You haven't joined any rooms",D(s,"class","placeholder svelte-13qkdxs")},m(e,t){$(e,s,t)},p:e,i:e,o:e,d(e){e&&b(s)}}}function dt(e){let t,s,n=[],o=new Map,r=e[0];const a=e=>e[16].id;for(let t=0;t<r.length;t+=1){let s=ct(e,r,t),i=a(s);o.set(i,n[t]=ht(i,s))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=M()},m(e,o){for(let t=0;t<n.length;t+=1)n[t].m(e,o);$(e,t,o),s=!0},p(e,s){261&s&&(r=e[0],re(),n=de(n,s,a,1,e,r,o,t.parentNode,ue,ht,t,ct),ae())},i(e){if(!s){for(let e=0;e<r.length;e+=1)ie(n[e]);s=!0}},o(e){for(let e=0;e<n.length;e+=1)le(n[e]);s=!1},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&b(t)}}}function ht(e,t){let s,n,o,r,a,i,l,c,u,d,h,m,f=t[16].name+"";function p(){return t[9](t[16])}return r=new it({}),{key:e,first:null,c(){s=w("button"),n=w("div"),o=w("div"),he(r.$$.fragment),a=x(),i=w("h3"),l=k(f),u=x(),D(i,"class","room-name svelte-13qkdxs"),D(o,"class","room-title svelte-13qkdxs"),D(n,"class",c="room "+(t[16].id===t[2]?"selected":"")+" svelte-13qkdxs"),D(s,"class","room-button svelte-13qkdxs"),this.first=s},m(e,t){$(e,s,t),y(s,n),y(n,o),me(r,o,null),y(o,a),y(o,i),y(i,l),y(s,u),d=!0,h||(m=I(s,"click",p),h=!0)},p(e,s){t=e,(!d||1&s)&&f!==(f=t[16].name+"")&&T(l,f),(!d||5&s&&c!==(c="room "+(t[16].id===t[2]?"selected":"")+" svelte-13qkdxs"))&&D(n,"class",c)},i(e){d||(ie(r.$$.fragment,e),d=!0)},o(e){le(r.$$.fragment,e),d=!1},d(e){e&&b(s),fe(r),h=!1,m()}}}function mt(t){let s;return{c(){s=w("p"),s.textContent="There are no rooms you haven't joined",D(s,"class","placeholder svelte-13qkdxs")},m(e,t){$(e,s,t)},p:e,i:e,o:e,d(e){e&&b(s)}}}function ft(e){let t,s,n=[],o=new Map,r=e[1];const a=e=>e[16].id;for(let t=0;t<r.length;t+=1){let s=lt(e,r,t),i=a(s);o.set(i,n[t]=pt(i,s))}return{c(){for(let e=0;e<n.length;e+=1)n[e].c();t=M()},m(e,o){for(let t=0;t<n.length;t+=1)n[t].m(e,o);$(e,t,o),s=!0},p(e,s){98&s&&(r=e[1],re(),n=de(n,s,a,1,e,r,o,t.parentNode,ue,pt,t,lt),ae())},i(e){if(!s){for(let e=0;e<r.length;e+=1)ie(n[e]);s=!0}},o(e){for(let e=0;e<n.length;e+=1)le(n[e]);s=!1},d(e){for(let t=0;t<n.length;t+=1)n[t].d(e);e&&b(t)}}}function pt(e,t){let s,n,o,r,a,i,l,c,u,d,h,m,f=t[16].name+"";function p(){return t[10](t[16])}return o=new it({}),{key:e,first:null,c(){s=w("div"),n=w("div"),he(o.$$.fragment),r=x(),a=w("h3"),i=k(f),l=x(),c=w("button"),c.textContent="Join",u=x(),D(a,"class","room-name svelte-13qkdxs"),D(n,"class","room-title svelte-13qkdxs"),D(c,"class","room-action svelte-13qkdxs"),D(s,"class","room svelte-13qkdxs"),this.first=s},m(e,t){$(e,s,t),y(s,n),me(o,n,null),y(n,r),y(n,a),y(a,i),y(s,l),y(s,c),y(s,u),d=!0,h||(m=I(c,"click",p),h=!0)},p(e,s){t=e,(!d||2&s)&&f!==(f=t[16].name+"")&&T(i,f)},i(e){d||(ie(o.$$.fragment,e),d=!0)},o(e){le(o.$$.fragment,e),d=!1},d(e){e&&b(s),fe(o),h=!1,m()}}}function gt(e){let t;return{c(){t=k("Create Room +")},m(e,s){$(e,t,s)},d(e){e&&b(t)}}}function yt(e){let t,s,n,o,r,a,i,l,c,u,d,h,m,f,p,g,v,M,j,_,S,O,R,q,E;const z=[dt,ut],N=[];function U(e,t){return e[0].length>0?0:1}o=U(e),r=N[o]=z[o](e);const H=[ft,mt],P=[];function A(e,t){return e[1].length>0?0:1}return u=A(e),d=P[u]=H[u](e),O=new Fe({props:{action:e[7],$$slots:{default:[gt]},$$scope:{ctx:e}}}),{c(){t=w("div"),s=w("p"),s.textContent="Joined rooms:",n=x(),r.c(),a=x(),i=w("div"),l=w("p"),l.textContent="Other rooms:",c=x(),d.c(),h=x(),m=w("div"),f=w("div"),p=w("label"),p.textContent="New room name:",g=x(),v=w("input"),M=x(),j=w("p"),_=k(e[4]),S=x(),he(O.$$.fragment),D(s,"class","title"),D(t,"class","joined-rooms"),D(l,"class","title"),D(i,"class","otherRooms"),D(p,"for","room-name"),D(v,"type","text"),D(v,"id","room-name"),D(j,"class","error svelte-13qkdxs"),D(m,"class","new-room svelte-13qkdxs")},m(r,d){$(r,t,d),y(t,s),y(t,n),N[o].m(t,null),$(r,a,d),$(r,i,d),y(i,l),y(i,c),P[u].m(i,null),$(r,h,d),$(r,m,d),y(m,f),y(f,p),y(f,g),y(f,v),C(v,e[3]),y(f,M),y(f,j),y(j,_),y(m,S),me(O,m,null),R=!0,q||(E=I(v,"input",e[11]),q=!0)},p(e,[s]){let n=o;o=U(e),o===n?N[o].p(e,s):(re(),le(N[n],1,1,(()=>{N[n]=null})),ae(),r=N[o],r?r.p(e,s):(r=N[o]=z[o](e),r.c()),ie(r,1),r.m(t,null));let a=u;u=A(e),u===a?P[u].p(e,s):(re(),le(P[a],1,1,(()=>{P[a]=null})),ae(),d=P[u],d?d.p(e,s):(d=P[u]=H[u](e),d.c()),ie(d,1),d.m(i,null)),8&s&&v.value!==e[3]&&C(v,e[3]),(!R||16&s)&&T(_,e[4]);const l={};2097152&s&&(l.$$scope={dirty:s,ctx:e}),O.$set(l)},i(e){R||(ie(r),ie(d),ie(O.$$.fragment,e),R=!0)},o(e){le(r),le(d),le(O.$$.fragment,e),R=!1},d(e){e&&b(t),N[o].d(),e&&b(a),e&&b(i),P[u].d(),e&&b(h),e&&b(m),fe(O),q=!1,E()}}}function $t(e,t,s){let n;i(e,ve,(e=>s(5,n=e)));const o=A("client");let r,a=[],l=[],c="",u="";const d=async(e,t)=>{(await o.joinRoom(e,t)).body.message&&f()},h=async e=>{s(2,c=e);const t=await o.getRoom(e);t.body.room?ke.set(t.body.room):ke.set(null)},m=e=>{if(e.body.rooms){const t=[],n=[];for(const s of e.body.rooms)s.joined?t.push(s):n.push(s);s(0,a=t),s(1,l=n)}},f=async()=>{const e=await o.getRooms();m(e)};let p;U((()=>{p=o.fresh.add(3e3,(()=>o.getRooms()),m)})),H((()=>{p()})),ke.subscribe((()=>f()));return[a,l,c,r,u,n,d,async()=>{const e=await o.createRoom(r);e.body.message?(s(4,u=""),s(3,r="")):s(4,u=e.body.error)},h,e=>h(e.id),e=>d(e.id,n),function(){r=this.value,s(3,r)}]}class bt extends ye{constructor(e){super(),ge(this,e,$t,yt,a,{})}}function wt(t){let s;return{c(){s=w("div"),s.innerHTML="<p>Log in to view rooms...</p>",D(s,"class","login-message svelte-16rt11w")},m(e,t){$(e,s,t)},i:e,o:e,d(e){e&&b(s)}}}function vt(e){let t,s;return t=new bt({}),{c(){he(t.$$.fragment)},m(e,n){me(t,e,n),s=!0},i(e){s||(ie(t.$$.fragment,e),s=!0)},o(e){le(t.$$.fragment,e),s=!1},d(e){fe(t,e)}}}function kt(e){let t,s,n,o;const r=[vt,wt],a=[];function i(e,t){return e[0]?0:1}return s=i(e),n=a[s]=r[s](e),{c(){t=w("aside"),n.c(),D(t,"class","svelte-16rt11w")},m(e,n){$(e,t,n),a[s].m(t,null),o=!0},p(e,[o]){let l=s;s=i(e),s!==l&&(re(),le(a[l],1,1,(()=>{a[l]=null})),ae(),n=a[s],n||(n=a[s]=r[s](e),n.c()),ie(n,1),n.m(t,null))},i(e){o||(ie(n),o=!0)},o(e){le(n),o=!1},d(e){e&&b(t),a[s].d()}}}function xt(e,t,s){let n;return i(e,we,(e=>s(0,n=e))),[n]}class Mt extends ye{constructor(e){super(),ge(this,e,xt,kt,a,{})}}function It(t){let s,n,o,r,a;return{c(){s=v("svg"),n=v("use"),o=x(),r=v("symbol"),a=v("path"),_(n,"xlink:href","#icon-paper-plane"),D(s,"class","icon icon-paper-plane svelte-1dywkow"),D(a,"d","M27.563 0.172c0.328 0.234 0.484 0.609 0.422 1l-4 24c-0.047 0.297-0.234 0.547-0.5 0.703-0.141 0.078-0.313 0.125-0.484 0.125-0.125 0-0.25-0.031-0.375-0.078l-7.078-2.891-3.781 4.609c-0.187 0.234-0.469 0.359-0.766 0.359-0.109 0-0.234-0.016-0.344-0.063-0.391-0.141-0.656-0.516-0.656-0.938v-5.453l13.5-16.547-16.703 14.453-6.172-2.531c-0.359-0.141-0.594-0.469-0.625-0.859-0.016-0.375 0.172-0.734 0.5-0.922l26-15c0.156-0.094 0.328-0.141 0.5-0.141 0.203 0 0.406 0.063 0.562 0.172z"),D(r,"id","icon-paper-plane"),D(r,"viewBox","0 0 28 28")},m(e,t){$(e,s,t),y(s,n),$(e,o,t),$(e,r,t),y(r,a)},p:e,i:e,o:e,d(e){e&&b(s),e&&b(o),e&&b(r)}}}class jt extends ye{constructor(e){super(),ge(this,e,null,It,a,{})}}const Dt=["Olav","Iselin","Magnus","Mari","Oliver","Tobias"],_t=["Olav1234","Iselin1234","Magnus1234","Mari1234","Oliver1234","Tobias1234"];var Tt=()=>{const e=Math.floor(Math.random()*Dt.length);return{username:Dt[e],password:_t[e]}};const Ct=new Map,St=new Map;St.set("pizza","bread with tomato and cheese"),St.set("bicycle","a bicycle is a transportation method on two wheels"),St.set("bike","a bike has two wheels"),St.set("programmer","a person that fixed a problem you dont know you have in a way you dont understand"),St.set("oslo","the capital of Norway");const Ot={starter:["Hey, people!","Hi there, I am a bot","Hey lads","Good [day]","Hi, [question]"],ender:["I have to go","cya, I have to go","Leaving. Talk to you later","Bye all"],question:["How are you?","Do you like [food]?","If you could live anywhere, where would it be?","Are you [mood]?"],statement:["The world is [mood]!","[food] is [mood]","I [attitude] [cloathing]"],attitude:["like","love","hate","somewhat like","dont like"],cloathing:["shoes","socks","hoodies","t-shirts","sweaters","pants","jackets"],mood:["good","great","fine","ok","happy","sad","awesome"],food:["pizza","meatballs","chocolate","chips","cookies","taco","burito","pasta","rice","salad"],like:["I [attitude] [subject]"],haha:[":D",":)","xD","Time goes faster when having fun!","The world needs more fun stuff","ahhahaha"],what:["[subject] is [explanation]","I dont know a lot about [subject], but i know it is [explanation]"],unknown:["I dont know what that is yet. You could try telling me by saying thing = explanation"],joke:["Hardware. The part of a computer you can kick","What is the object oriented way to become wealty? Inheritance","What do you call programmers from Norway? Nerdic","What is a programmers hangout place? Foo bar"],cool:["cool","nice","right on, [sender]"],no:["ahh, too bad","well, ok","hmm",":/"],bad:["ahh, too bad","well, ok","that sucks",":/"],bye:["goodbye [sender]!","bye [sender]","Sucks that you have to leave, see ya","See you buddy"],ok:["well then","cool","allright then"],thanks:["my pleasure","no worries [sender]"],sorry:["no worries [sender]","no problem at all","nothing I cant handle","it's totally fine [sender]. I am only a bot anyways."],places:["Oslo","Berlin","London","New York","at my parents","in the woods","on a mountain"],hi:["Hey buddy. [sender] is a cool name!","Good day to you!","Hi [sender]. [question]","Hello my friend. [question]"],up:["I am [mood]","Nothing much. [statement]","Its an awesome day!"],how:["I am [mood]","Fine. [statement]","Its an awesome day!"],bot:["My name is [username]. I am a bot","I am [username]","[username] is my name","Not a human"],understand:["I didn't quite catch that","I don't understand. Let's talk about something else. [statement]","That sentence was a bit too advanced for me"],saved:["Now I know what [subject] is!","Thank you for explaining what [subject] is"],inactive:["Are you still here?","Anyone here?","Hellooooooooooo..","Someone here?","I guess everyone left."],else:["On to something else. [statement]","On to something else. [question]","Let's talk about sometihng else!"]},Rt=e=>Ot.subject?e:Ot.unknown;Ct.set("=",(()=>Rt(Ot.saved))),Ct.set(" do you like ",(()=>Rt(Ot.like))),Ct.set(" what is ",(()=>Rt(Ot.what))),Ct.set(" who is ",(()=>Rt(Ot.what))),Ct.set(" explain ",(()=>Rt(Ot.what))),Ct.set(" tell us about ",(()=>Rt(Ot.what))),Ct.set(" tell me about ",(()=>Rt(Ot.what))),Ct.set(" hi ",(()=>Ot.hi)),Ct.set(" hello ",(()=>Ot.hi)),Ct.set(" good day ",(()=>Ot.hi)),Ct.set(" hola ",(()=>Ot.hi)),Ct.set(" hey ",(()=>Ot.hi)),Ct.set(" yo ",(()=>Ot.hi)),Ct.set(" whats up ",(()=>Ot.hi)),Ct.set(" how are you ",(()=>Ot.how)),Ct.set(" bot ",(()=>Ot.bot)),Ct.set(" who are you ",(()=>Ot.bot)),Ct.set(" are you real ",(()=>Ot.bot)),Ct.set(" you are real ",(()=>Ot.bot)),Ct.set(" you are real ",(()=>Ot.bot)),Ct.set(" are you a human ",(()=>Ot.hi)),Ct.set(" yes ",(()=>Ot.cool)),Ct.set(" yep ",(()=>Ot.cool)),Ct.set(" yup ",(()=>Ot.cool)),Ct.set(" yeah ",(()=>Ot.cool)),Ct.set(" ok ",(()=>Ot.ok)),Ct.set(" okey ",(()=>Ot.ok)),Ct.set(" nope ",(()=>Ot.no)),Ct.set(" no ",(()=>Ot.no)),Ct.set(" nah ",(()=>Ot.no)),Ct.set(" nix ",(()=>Ot.no)),Ct.set(" sorry ",(()=>Ot.sorry)),Ct.set(" is bad ",(()=>Ot.bad)),Ct.set(" agree ",(()=>Ot.else)),Ct.set(" cool ",(()=>Ot.else)),Ct.set(" nice ",(()=>Ot.else)),Ct.set(" right on ",(()=>Ot.else)),Ct.set(" to bad ",(()=>Ot.else)),Ct.set(" no worries ",(()=>Ot.else)),Ct.set(" thank you ",(()=>Ot.thanks)),Ct.set(" thanks ",(()=>Ot.thanks)),Ct.set(" ty ",(()=>Ot.thanks)),Ct.set(" thankyou ",(()=>Ot.thanks)),Ct.set(" i am fine ",(()=>Ot.cool)),Ct.set(" i am good ",(()=>Ot.cool)),Ct.set(" i am great ",(()=>Ot.cool)),Ct.set(" i am ok ",(()=>Ot.ok)),Ct.set(" i am ill ",(()=>Ot.no)),Ct.set(" i am happy ",(()=>Ot.cool)),Ct.set(" i am down ",(()=>Ot.no)),Ct.set(" i am depressed ",(()=>Ot.no)),Ct.set(" i am overwhelmed ",(()=>Ot.no)),Ct.set(" i am stressed ",(()=>Ot.no)),Ct.set(" i am not good ",(()=>Ot.no)),Ct.set(" tell me a joke ",(()=>Ot.joke)),Ct.set(" tell us a joke ",(()=>Ot.joke)),Ct.set(" live anywhere ",(()=>Ot.places)),Ct.set(" want to live ",(()=>Ot.places)),Ct.set(" name a place ",(()=>Ot.places)),Ct.set(" where do you live ",(()=>Ot.places)),Ct.set(" where were you born ",(()=>Ot.places)),Ct.set(" what is the time ",(()=>Ot.time)),Ct.set(" time is it ",(()=>Ot.time)),Ct.set(" it today ",(()=>Ot.date)),Ct.set(" what year ",(()=>Ot.date)),Ct.set(" what month ",(()=>Ot.date)),Ct.set(" what day ",(()=>Ot.date)),Ct.set(" lol ",(()=>Ot.haha)),Ct.set(" haha ",(()=>Ot.haha)),Ct.set(" hahaha ",(()=>Ot.haha)),Ct.set(" hah ",(()=>Ot.haha)),Ct.set(" hahahah ",(()=>Ot.haha)),Ct.set(" ahahha ",(()=>Ot.haha)),Ct.set(" ahah ",(()=>Ot.haha)),Ct.set(" ahahhaha ",(()=>Ot.haha)),Ct.set(" goodbye ",(()=>Ot.bye)),Ct.set(" bye ",(()=>Ot.bye)),Ct.set(" be back ",(()=>Ot.bye)),Ct.set(" i am leaving ",(()=>Ot.bye)),Ct.set(" good bye ",(()=>Ot.bye)),Ct.set(" see you ",(()=>Ot.bye)),Ct.set(" goodnight ",(()=>Ot.bye)),Ct.set(" good night ",(()=>Ot.bye));const qt=e=>{var t;for(e=(t=e)[Math.floor(Math.random()*t.length)];e.indexOf("[")>-1&&e.indexOf("]")>-1;){const t=e.substring(e.indexOf("[")+1,e.indexOf("]"));if(Ot[t]){const s=e.split(new RegExp(`(\\[${t}\\])`,"g")),n=s.indexOf(`[${t}]`);s[n]=qt(Ot[t]),e=s.join("")}}return e};var Et=e=>(t,s)=>{let n="",o="";if((({username:e},t,s)=>{Ot.username=[e],t&&(Ot.sender=[t]);const n=new Date,o=n.getHours(),r=o>6&&o<20;Ot.time=[r?"day":"night",`${o} o'clock`],Ot.day=[r?"day":"night"];const a=`${n.getDate()}.${n.getMonth()}.${n.getFullYear()}`;if(Ot.date=[`Today is ${a}`,`The date is ${a}`],s)if(s.includes("=")){let e=s.split("=");2===e.length?(Ot.subject=[e[0].trim()],Ot.explanation=[e[1].slice(1)],St.set(e[0].trim(),e[1].slice(1))):(Ot.subject=null,Ot.explanation=null)}else for(const[e,t]of St){if(s.includes(e)){Ot.subject=[e],Ot.explanation=[t];break}Ot.subject=null,Ot.explanation=null}else Ot.subject=null,Ot.explanation=null})(e,t?t.sender:null,t?t.message:null),s&&s.starter)return qt(Ot.starter);if(s&&s.ender)return qt(Ot.ender);if(!t)return qt(Ot.inactive);const{sender:r,message:a}=t;if(a){o=a.toLowerCase().replace("!","").replace(".","").replace(",","").replace("'","").replace('"',"").replace("-"," ").replace("_"," ").replace("?","").replace("*","").replace("`","").replace("(","").replace(")",""),o=` ${o} `;for(const[e,t]of Ct)if(o.includes(e)){n=qt(t());break}}return n||(n=qt(Ot.understand)),n};class zt{client;options;username;password;roomID;userID;loopID;mastermind;unresponsive=0;messages=[];newMessages=[];messageSentCounter=0;numberOfMessages;lastMessage={sender:"",message:""};lastMessageTime;constructor(e,t){let{username:s,password:n}=Tt();t.name&&(s=t.name),this.client=e,this.options=t||{},this.username=s,this.password=n,this.numberOfMessages=Math.floor(21*Math.random()+10),this.mastermind=Et({username:this.username})}async start(){let e=await this.client.registerBot(this.username,this.password);if("User created"===e.body.message&&(e=await this.client.login(this.username,this.password),"Logged in"===e.body.message)){this.userID=this.client.state.get().userID;try{await this.joinRoom()}catch(e){return void this.shutdown()}return e=await this.client.getMessages(this.roomID),e&&(this.messages=e.body.messages),void this.loop()}this.shutdown()}async joinRoom(){const e=this.options.room?this.options.room:"Botroom";let t=await this.client.getRooms();for(const s of t.body.rooms)if(s.name===e)return await this.client.joinRoom(s.id,this.userID),void(this.roomID=s.id);await this.client.createRoom(e),t=await this.client.getRooms();for(const s of t.body.rooms)if(s.name===e)return this.roomID=s.id,void(this.admin=!0)}shouldBeAlive(){this.messageSentCounter!==this.numberOfMessages||this.shutdown()}nextMessage(){if(this.newMessages.length>0){const e=this.newMessages.shift();if(this.messages.push(e),e.sender!==this.username)return e}}loop(){const e=this.client.fresh.add(1e3,(()=>this.client.getMessages(this.roomID)),this.updateMessages,this.shutdown);this.lastMessageTime=Date.now(),this.sendDelay(this.mastermind(null,{starter:!0}));const t=setInterval((()=>{const e=this.nextMessage();if(e)this.shouldBeAlive(),this.lastMessageTime=Date.now(),this.sendDelay(this.mastermind(e));else if(Date.now()-this.lastMessageTime>3e4){if(this.unresponsive+=1,2===this.unresponsive)return void this.shutdown();this.send(this.mastermind()),this.lastMessageTime=Date.now()}}),500);this.stopFresh=e,this.loopID=t}shutdown=async e=>{this.loopID&&clearInterval(this.loopID),this.stopFresh&&this.stopFresh(),"server down"!==e&&(this.roomID&&this.send(this.mastermind(null,{ender:!0})),this.admin?this.logout():this.deregister())};updateMessages=e=>{const t=[...e.body.messages];this.newMessages=t.slice(this.messages.length,t.length)};send(e){this.messageSentCounter+=1;(async()=>{(await this.client.postMessage(this.roomID,this.userID,e)).body.error&&this.shutdown("server down")})()}sendDelay(e){let t=Math.floor(7*Math.random()+4);setTimeout((()=>{this.send(e)}),t)}async deregister(){await this.client.deleteUser(this.userID)}async logout(){await this.client.logout(this.client.state.get().token)}}function Nt(e){let t,s,n,o,r,a=(e[0]?e[0]:"bot")+"",i=e[2].name+"";return{c(){t=k("Add "),s=k(a),n=k(" to "),o=k(i),r=k(" +")},m(e,a){$(e,t,a),$(e,s,a),$(e,n,a),$(e,o,a),$(e,r,a)},p(e,t){1&t&&a!==(a=(e[0]?e[0]:"bot")+"")&&T(s,a),4&t&&i!==(i=e[2].name+"")&&T(o,i)},d(e){e&&b(t),e&&b(s),e&&b(n),e&&b(o),e&&b(r)}}}function Ut(e){let t,s,n,o,r,a,i,l,c,u,d,h,m;return u=new Fe({props:{action:e[3],$$slots:{default:[Nt]},$$scope:{ctx:e}}}),{c(){t=w("div"),s=w("div"),n=w("label"),n.textContent="New bot name:",o=x(),r=w("input"),a=x(),i=w("p"),l=k(e[1]),c=x(),he(u.$$.fragment),D(n,"for","room-name"),D(r,"type","text"),D(r,"id","room-name"),D(i,"class","error svelte-9qzgh7"),D(t,"class","add-bot svelte-9qzgh7")},m(f,p){$(f,t,p),y(t,s),y(s,n),y(s,o),y(s,r),C(r,e[0]),y(s,a),y(s,i),y(i,l),y(t,c),me(u,t,null),d=!0,h||(m=I(r,"input",e[5]),h=!0)},p(e,[t]){1&t&&r.value!==e[0]&&C(r,e[0]),(!d||2&t)&&T(l,e[1]);const s={};517&t&&(s.$$scope={dirty:t,ctx:e}),u.$set(s)},i(e){d||(ie(u.$$.fragment,e),d=!0)},o(e){le(u.$$.fragment,e),d=!1},d(e){e&&b(t),fe(u),h=!1,m()}}}function Ht(e,t,s){let n;i(e,ke,(e=>s(2,n=e)));let{room:o}=t;const r=A("host"),a=A("port"),l=A("client");let c="",u="";return e.$$set=e=>{"room"in e&&s(4,o=e.room)},[c,u,n,async()=>{const e=await l.getUsers();if(e.body.users){if(!c||c.length<3)return void s(1,u="Name must be 3 characters or longer");for(const t of e.body.users)if(t.username===c)return void s(1,u="A bot or user with that name allready exists")}((e,t)=>new zt(e,t))(ze({host:r,port:a}),{room:o,name:c}).start(),s(1,u=""),s(0,c="")},o,function(){c=this.value,s(0,c)}]}class Pt extends ye{constructor(e){super(),ge(this,e,Ht,Ut,a,{room:4})}}function At(t){let s,n,o,r,a;return{c(){s=v("svg"),n=v("use"),o=x(),r=v("symbol"),a=v("path"),_(n,"xlink:href","#icon-user"),D(s,"class","icon icon-user svelte-8idrmo"),D(a,"d","M18 22.082v-1.649c2.203-1.241 4-4.337 4-7.432 0-4.971 0-9-6-9s-6 4.029-6 9c0 3.096 1.797 6.191 4 7.432v1.649c-6.784 0.555-12 3.888-12 7.918h28c0-4.030-5.216-7.364-12-7.918z"),D(r,"id","icon-user"),D(r,"viewBox","0 0 32 32")},m(e,t){$(e,s,t),y(s,n),$(e,o,t),$(e,r,t),y(r,a)},p:e,i:e,o:e,d(e){e&&b(s),e&&b(o),e&&b(r)}}}class Lt extends ye{constructor(e){super(),ge(this,e,null,At,a,{})}}function Bt(t){let s,n,o,r,a;return{c(){s=v("svg"),n=v("use"),o=x(),r=v("symbol"),a=v("path"),_(n,"xlink:href","#icon-f-droid"),D(s,"class","icon icon-f-droid svelte-8idrmo"),D(a,"d","M27.296 13.441h-22.592c-1.169 0-2.119 0.948-2.119 2.119v14.12c0 1.169 0.948 2.119 2.119 2.119h22.592c1.169 0 2.119-0.948 2.119-2.119v-14.12c0-1.171-0.949-2.119-2.119-2.119zM16 30.033c-4.088 0-7.413-3.325-7.413-7.413s3.325-7.413 7.413-7.413 7.413 3.325 7.413 7.413-3.325 7.413-7.413 7.413zM16 16.548c-3.348 0-6.072 2.724-6.072 6.072s2.724 6.072 6.072 6.072 6.072-2.724 6.072-6.072-2.724-6.072-6.072-6.072zM16 27.032c-2.084 0-3.841-1.471-4.295-3.424h2.227c0.367 0.775 1.145 1.305 2.068 1.305 1.28 0 2.295-1.015 2.295-2.295s-1.015-2.295-2.295-2.295c-0.865 0-1.6 0.469-1.991 1.165h-2.269c0.504-1.883 2.225-3.283 4.26-3.283 2.424 0 4.412 1.988 4.412 4.412 0 2.425-1.988 4.413-4.412 4.413zM31.799 0.528c-0.001 0.001-0.003 0.003-0.003 0.004-0.003-0.003-0.005-0.004-0.008-0.007 0.001-0.001 0.003-0.004 0.005-0.005-0.155-0.183-0.372-0.308-0.692-0.317-0.269 0.007-0.521 0.129-0.683 0.345l-2.424 3.137c-0.219-0.077-0.452-0.127-0.697-0.127h-22.593c-0.245 0-0.477 0.051-0.697 0.127l-2.424-3.139c-0.161-0.216-0.413-0.337-0.683-0.345-0.32 0.008-0.537 0.133-0.692 0.317 0.001 0.001 0.003 0.004 0.005 0.005-0.004 0.003-0.007 0.005-0.009 0.008 0-0.001-0.001-0.003-0.003-0.004-0.088 0.104-0.396 0.568-0.016 1.099l2.545 3.295c-0.089 0.235-0.144 0.488-0.144 0.755v4.943c0 1.169 0.948 2.119 2.119 2.119h22.592c1.169 0 2.119-0.948 2.119-2.119v-4.943c0-0.267-0.055-0.52-0.145-0.755l2.545-3.295c0.379-0.531 0.071-0.995-0.017-1.099zM9.205 10.971c-1.316 0-2.383-1.067-2.383-2.383s1.067-2.383 2.383-2.383 2.383 1.067 2.383 2.383-1.067 2.383-2.383 2.383zM22.972 10.971c-1.316 0-2.383-1.067-2.383-2.383s1.067-2.383 2.383-2.383 2.383 1.067 2.383 2.383-1.067 2.383-2.383 2.383z"),D(r,"id","icon-f-droid"),D(r,"viewBox","0 0 32 32")},m(e,t){$(e,s,t),y(s,n),$(e,o,t),$(e,r,t),y(r,a)},p:e,i:e,o:e,d(e){e&&b(s),e&&b(o),e&&b(r)}}}class Ft extends ye{constructor(e){super(),ge(this,e,null,Bt,a,{})}}function Jt(e,t,s){const n=e.slice();return n[8]=t[s],n}function Wt(e){let t,s;return t=new Lt({}),{c(){he(t.$$.fragment)},m(e,n){me(t,e,n),s=!0},i(e){s||(ie(t.$$.fragment,e),s=!0)},o(e){le(t.$$.fragment,e),s=!1},d(e){fe(t,e)}}}function Yt(e){let t,s;return t=new Ft({}),{c(){he(t.$$.fragment)},m(e,n){me(t,e,n),s=!0},i(e){s||(ie(t.$$.fragment,e),s=!0)},o(e){le(t.$$.fragment,e),s=!1},d(e){fe(t,e)}}}function Gt(e){let t;return{c(){t=w("p"),t.textContent="(you)",D(t,"class","admin svelte-1chyo9m")},m(e,s){$(e,t,s)},d(e){e&&b(t)}}}function Kt(e){let t;return{c(){t=w("p"),t.textContent="(admin)",D(t,"class","admin svelte-1chyo9m")},m(e,s){$(e,t,s)},d(e){e&&b(t)}}}function Qt(e){let t;return{c(){t=w("p"),t.textContent="(admin/you)",D(t,"class","admin svelte-1chyo9m")},m(e,s){$(e,t,s)},d(e){e&&b(t)}}}function Vt(e,t){let s,n,o,r,a,i,l,c,u,d,h,m,f=t[8].username+"";const p=[Yt,Wt],g=[];function v(e,t){return e[8].bot?0:1}function M(e,t){return(null==u||3&t)&&(u=!(e[8].id!==e[1].admin||e[8].id!==e[2].state.get().userID)),u?Qt:e[8].id===e[1].admin?Kt:((null==d||1&t)&&(d=!(e[8].id!==e[2].state.get().userID)),d?Gt:void 0)}o=v(t),r=g[o]=p[o](t);let I=M(t,-1),j=I&&I(t);return{key:e,first:null,c(){s=w("li"),n=w("div"),r.c(),a=x(),i=w("p"),l=k(f),c=x(),j&&j.c(),h=x(),D(n,"class","user-name svelte-1chyo9m"),D(s,"class","svelte-1chyo9m"),this.first=s},m(e,t){$(e,s,t),y(s,n),g[o].m(n,null),y(n,a),y(n,i),y(i,l),y(s,c),j&&j.m(s,null),y(s,h),m=!0},p(e,i){let c=o;o=v(t=e),o!==c&&(re(),le(g[c],1,1,(()=>{g[c]=null})),ae(),r=g[o],r||(r=g[o]=p[o](t),r.c()),ie(r,1),r.m(n,a)),(!m||1&i)&&f!==(f=t[8].username+"")&&T(l,f),I!==(I=M(t,i))&&(j&&j.d(1),j=I&&I(t),j&&(j.c(),j.m(s,h)))},i(e){m||(ie(r),m=!0)},o(e){le(r),m=!1},d(e){e&&b(s),g[o].d(),j&&j.d()}}}function Xt(e){let t,s,n=[],o=new Map,r=e[0];const a=e=>e[8].id;for(let t=0;t<r.length;t+=1){let s=Jt(e,r,t),i=a(s);o.set(i,n[t]=Vt(i,s))}return{c(){t=w("ul");for(let e=0;e<n.length;e+=1)n[e].c();D(t,"class","svelte-1chyo9m")},m(e,o){$(e,t,o);for(let e=0;e<n.length;e+=1)n[e].m(t,null);s=!0},p(e,[s]){7&s&&(r=e[0],re(),n=de(n,s,a,1,e,r,o,t,ue,Vt,null,Jt),ae())},i(e){if(!s){for(let e=0;e<r.length;e+=1)ie(n[e]);s=!0}},o(e){for(let e=0;e<n.length;e+=1)le(n[e]);s=!1},d(e){e&&b(t);for(let e=0;e<n.length;e+=1)n[e].d()}}}function Zt(e,t,s){let n;i(e,ke,(e=>s(1,n=e)));const o=A("client");let r,a=[];const l=e=>{e.body.users&&s(0,a=e.body.users)},c=async()=>{if(n){const e=await o.getUsersInRoom(n.id);l(e)}};U((()=>{c(),(async()=>{r=o.fresh.add(3e3,(()=>o.getUsersInRoom(n.id)),l)})()}));const u=ke.subscribe((e=>c()));return H((()=>{r(),u()})),[a,n,o]}class es extends ye{constructor(e){super(),ge(this,e,Zt,Xt,a,{})}}function ts(e,t,s){const n=e.slice();return n[16]=t[s],n}function ss(e){let t,s,n,o,r,a,i,l,c,u=e[16].sender+"",d=e[16].message+"";return{c(){t=w("div"),s=w("p"),n=k(u),o=k(":"),r=x(),a=w("div"),i=w("p"),l=k(d),c=x(),D(s,"class","author svelte-82a05y"),D(i,"class","message-text svelte-82a05y"),D(a,"class","message-bubble svelte-82a05y"),D(t,"class","message svelte-82a05y")},m(e,u){$(e,t,u),y(t,s),y(s,n),y(s,o),y(t,r),y(t,a),y(a,i),y(i,l),y(t,c)},p(e,t){1&t&&u!==(u=e[16].sender+"")&&T(n,u),1&t&&d!==(d=e[16].message+"")&&T(l,d)},d(e){e&&b(t)}}}function ns(e){let t,s,n,o,r;return o=new Fe({props:{color:"red",action:e[6],$$slots:{default:[os]},$$scope:{ctx:e}}}),{c(){t=w("div"),s=w("p"),s.textContent="Admin actions:",n=x(),he(o.$$.fragment),D(t,"class","admin-actions svelte-82a05y")},m(e,a){$(e,t,a),y(t,s),y(t,n),me(o,t,null),r=!0},p(e,t){const s={};524288&t&&(s.$$scope={dirty:t,ctx:e}),o.$set(s)},i(e){r||(ie(o.$$.fragment,e),r=!0)},o(e){le(o.$$.fragment,e),r=!1},d(e){e&&b(t),fe(o)}}}function os(e){let t;return{c(){t=k("Delete room")},m(e,s){$(e,t,s)},d(e){e&&b(t)}}}function rs(e){let t,s,n,r,a,i,l,c,u,d,h,m,f,p,g,v,k,M,j,_,T,S,O=e[0],R=[];for(let t=0;t<O.length;t+=1)R[t]=ss(ts(e,O,t));u=new jt({});let q=e[3].admin===e[4]&&ns(e);return k=new es({}),j=new Pt({props:{room:e[3].name}}),{c(){t=w("div"),s=w("div"),n=w("div");for(let e=0;e<R.length;e+=1)R[e].c();r=x(),a=w("div"),i=w("input"),l=x(),c=w("button"),he(u.$$.fragment),h=x(),m=w("div"),q&&q.c(),f=x(),p=w("div"),g=w("p"),g.textContent="Users in room:",v=x(),he(k.$$.fragment),M=x(),he(j.$$.fragment),D(n,"class","feed svelte-82a05y"),D(i,"class","input-box svelte-82a05y"),D(i,"placeholder","type message..."),D(i,"type","text"),D(i,"rows","3"),c.disabled=d=0===e[1].length,D(c,"class","send-button svelte-82a05y"),D(a,"class","message-input svelte-82a05y"),D(s,"class","chat svelte-82a05y"),D(m,"class","metadata svelte-82a05y"),D(t,"class","room svelte-82a05y")},m(o,d){$(o,t,d),y(t,s),y(s,n);for(let e=0;e<R.length;e+=1)R[e].m(n,null);e[7](n),y(s,r),y(s,a),y(a,i),C(i,e[1]),y(a,l),y(a,c),me(u,c,null),y(t,h),y(t,m),q&&q.m(m,null),y(m,f),y(m,p),y(p,g),y(p,v),me(k,p,null),y(m,M),me(j,m,null),_=!0,T||(S=[I(i,"keydown",e[8]),I(i,"input",e[9]),I(c,"click",e[5])],T=!0)},p(e,[t]){if(1&t){let s;for(O=e[0],s=0;s<O.length;s+=1){const o=ts(e,O,s);R[s]?R[s].p(o,t):(R[s]=ss(o),R[s].c(),R[s].m(n,null))}for(;s<R.length;s+=1)R[s].d(1);R.length=O.length}2&t&&i.value!==e[1]&&C(i,e[1]),(!_||2&t&&d!==(d=0===e[1].length))&&(c.disabled=d),e[3].admin===e[4]?q?(q.p(e,t),24&t&&ie(q,1)):(q=ns(e),q.c(),ie(q,1),q.m(m,f)):q&&(re(),le(q,1,1,(()=>{q=null})),ae());const s={};8&t&&(s.room=e[3].name),j.$set(s)},i(e){_||(ie(u.$$.fragment,e),ie(q),ie(k.$$.fragment,e),ie(j.$$.fragment,e),_=!0)},o(e){le(u.$$.fragment,e),le(q),le(k.$$.fragment,e),le(j.$$.fragment,e),_=!1},d(s){s&&b(t),function(e,t){for(let s=0;s<e.length;s+=1)e[s]&&e[s].d(t)}(R,s),e[7](null),fe(u),q&&q.d(),fe(k),fe(j),T=!1,o(S)}}}function as(e,t,s){let n,o;i(e,ke,(e=>s(3,n=e))),i(e,ve,(e=>s(4,o=e)));let r,a,l=[],c="",u=A("client");const d=e=>{if(e.body.messages&&s(0,l=e.body.messages),a){let e=20;for(const t of a.children)e+=t.clientHeight,e+=20;setTimeout((()=>s(2,a.scrollTop=e,a)),50)}},h=async()=>{if(n){const e=await u.getMessages(n.id);d(e)}},m=async()=>{if(!c)return;(await u.postMessage(n.id,o,c)).body.message&&s(1,c="")};U((()=>{h(),(async()=>{r=u.fresh.add(3e3,(()=>u.getMessages(n.id)),d)})()}));const f=ke.subscribe((e=>{h()}));H((()=>{r(),f()}));return[l,c,a,n,o,m,async()=>{(await u.deleteRoom(n.id)).body.message&&function(e,t,s=t){e.set(s)}(ke,n=null,n)},function(e){F[e?"unshift":"push"]((()=>{a=e,s(2,a)}))},e=>{13===e.keyCode&&m()},function(){c=this.value,s(1,c)}]}class is extends ye{constructor(e){super(),ge(this,e,as,rs,a,{})}}function ls(t){let s;return{c(){s=w("div"),s.innerHTML='<h1>Welcome!</h1> \n        <div><p class="sub svelte-9n71tp">This is a chat room for humans and bots :)</p> \n            <p class="sub svelte-9n71tp">Register or login to access the chat rooms.</p></div>',D(s,"class","welcome-box svelte-9n71tp")},m(e,t){$(e,s,t)},i:e,o:e,d(e){e&&b(s)}}}function cs(e){let t,s;return t=new is({}),{c(){he(t.$$.fragment)},m(e,n){me(t,e,n),s=!0},i(e){s||(ie(t.$$.fragment,e),s=!0)},o(e){le(t.$$.fragment,e),s=!1},d(e){fe(t,e)}}}function us(e){let t,s,n,o;const r=[cs,ls],a=[];function i(e,t){return e[0]?0:1}return t=i(e),s=a[t]=r[t](e),{c(){s.c(),n=M()},m(e,s){a[t].m(e,s),$(e,n,s),o=!0},p(e,[o]){let l=t;t=i(e),t!==l&&(re(),le(a[l],1,1,(()=>{a[l]=null})),ae(),s=a[t],s||(s=a[t]=r[t](e),s.c()),ie(s,1),s.m(n.parentNode,n))},i(e){o||(ie(s),o=!0)},o(e){le(s),o=!1},d(e){a[t].d(e),e&&b(n)}}}function ds(e,t,s){let n;return i(e,ke,(e=>s(0,n=e))),[n]}class hs extends ye{constructor(e){super(),ge(this,e,ds,us,a,{})}}function ms(t){let s,n,o,r,a,i,l,c;return s=new rt({}),r=new Mt({}),l=new hs({}),{c(){he(s.$$.fragment),n=x(),o=w("div"),he(r.$$.fragment),a=x(),i=w("main"),he(l.$$.fragment),D(i,"class","svelte-1tdyujj"),D(o,"class","content svelte-1tdyujj")},m(e,t){me(s,e,t),$(e,n,t),$(e,o,t),me(r,o,null),y(o,a),y(o,i),me(l,i,null),c=!0},p:e,i(e){c||(ie(s.$$.fragment,e),ie(r.$$.fragment,e),ie(l.$$.fragment,e),c=!0)},o(e){le(s.$$.fragment,e),le(r.$$.fragment,e),le(l.$$.fragment,e),c=!1},d(e){fe(s,e),e&&b(n),e&&b(o),fe(r),fe(l)}}}function fs(e,t,s){let n,o;i(e,we,(e=>s(1,n=e))),i(e,ve,(e=>s(2,o=e)));let r=window.location.hostname,a=window.location.port;const l=ze({host:r,port:a});let c;return P("client",l),P("host",r),P("port",a),n&&l.state.update({token:n}),o&&l.state.update({userID:o}),U((()=>{c=l.state.subscribe((e=>{e.token&&"string"==typeof e.token?we.set(e.token):(we.set(""),ke.set(null)),e.userID&&"string"==typeof e.userID?ve.set(e.userID):ve.set("")}))})),H((()=>{c()})),[]}return new class extends ye{constructor(e){super(),ge(this,e,fs,ms,a,{})}}({target:document.body})}();
//# sourceMappingURL=bundle.js.map
